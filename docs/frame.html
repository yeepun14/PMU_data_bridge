<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html;charset=utf-8">
    <title>frame.py</title>
    <link rel="stylesheet" href="pycco.css">
</head>
<body>
<div id="background"></div>
<div id='container'>
    <div class='section'>
        <div class='docs'><h1>frame.py</h1></div>
    </div>
    <div class='clearall'>
        <div class='section' id='section-0'>
            <div class='docs'>
                <div class='octowrap'>
                    <a class='octothorpe' href='#section-0'>#</a>
                </div>
                <h1>IEEE Std C37.118.2 - 2011 Frame Implementation - Warning: Documentation is outdated!!!</h1>
                <p>This script provides implementation of IEEE Standard for Synchrophasor
                    Data Transfer for Power Systems.</p>
                <p><strong>IEEE C37.118.2 standard</strong> defines four types of frames:</p>
                <ul>
                    <li>Data Frames.</li>
                    <li>Configuration Frames (multiple versions).</li>
                    <li>Command Frames.</li>
                    <li>Header Frames.</li>
                </ul>
            </div>
            <div class='code'>
                <div class="highlight"><pre><span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span
                        class="n">ABCMeta</span><span class="p">,</span> <span class="n">abstractmethod</span>
<span class="kn">from</span> <span class="nn">synchrophasor.utils</span> <span class="kn">import</span> <span class="n">crc16xmodem</span>
<span class="kn">from</span> <span class="nn">synchrophasor.utils</span> <span class="kn">import</span> <span class="n">list2bytes</span>
<span class="kn">from</span> <span class="nn">struct</span> <span class="kn">import</span> <span
                            class="n">pack</span><span class="p">,</span> <span class="n">unpack</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">time</span>
<span class="kn">import</span> <span class="nn">collections</span>

<span class="n">__author__</span> <span class="o">=</span> <span class="s">&quot;Stevan Sandi&quot;</span>
<span class="n">__copyright__</span> <span class="o">=</span> <span class="s">&quot;Copyright (c) 2016, Tomo Popovic, Stevan Sandi, Bozo Krstajic&quot;</span>
<span class="n">__credits__</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">__license__</span> <span class="o">=</span> <span class="s">&quot;BSD-3&quot;</span>
<span class="n">__version__</span> <span class="o">=</span> <span class="s">&quot;0.1&quot;</span>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-1'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-1'>#</a>
                    </div>
                    <h2>CommonFrame</h2>
                    <p>CommonFrame is abstract class which represents words (fields) common to all frame types.</p>
                    <p>Class contains two abstract methods:</p>
                    <ul>
                        <li><code>convert2bytes()</code> - for converting frame to bytes convenient for sending.</li>
                        <li><code>convert2frame()</code> - which converts array of bytes to specific frame.</li>
                    </ul>
                    <p>Both of these methods must must be implemented for each frame type.</p>
                    <p>Following attributes are common for all frame types:</p>
                    <p><strong>Attributes:</strong></p>
                    <ul>
                        <li><code>frame_type</code> <strong>(int)</strong> - Defines frame type.</li>
                        <li><code>version</code> <strong>(int)</strong> - Standard version. Default value:
                            <code>1</code>.
                        </li>
                        <li><code>pmu_id_code</code> <strong>(int)</strong> - Data stream ID number.</li>
                        <li><code>soc</code> <strong>(int)</strong> - UNIX timestamp. Default value: <code>None</code>.
                        </li>
                        <li><code>frasec</code> <strong>(int)</strong> - Fraction of second and Time Quality. Default
                            value: <code>None</code>.
                        </li>
                    </ul>
                    <p><strong>Raises:</strong></p>
<pre><code>FrameError
</code></pre>
                    <p>When it's not possible to create valid frame, usually due invalid parameter value.</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre><span class="k">class</span> <span class="nc">CommonFrame</span><span
                                class="p">(</span><span class="n">metaclass</span><span class="o">=</span><span
                                class="n">ABCMeta</span><span class="p">):</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-2'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-2'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>    <span class="n">FRAME_TYPES</span> <span class="o">=</span> <span
                                class="p">{</span><span class="s">&#39;data&#39;</span><span class="p">:</span><span
                                class="mi">0</span><span class="p">,</span> <span class="s">&#39;header&#39;</span><span
                                class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;cfg1&#39;</span><span
                                class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;cfg2&#39;</span><span
                                class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;cfg3&#39;</span><span
                                class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s">&#39;cmd&#39;</span><span
                                class="p">:</span> <span class="mi">4</span><span class="p">}</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-3'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-3'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">__init__</span><span
                            class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame_type</span><span
                            class="p">,</span> <span class="n">pmu_id_code</span><span class="p">,</span> <span
                            class="n">soc</span><span class="o">=</span><span class="bp">None</span><span
                            class="p">,</span> <span class="n">frasec</span><span class="o">=</span><span class="bp">None</span><span
                            class="p">,</span> <span class="n">version</span><span class="o">=</span><span
                            class="mi">1</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_frame_type</span><span
                                class="p">(</span><span class="n">frame_type</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_version</span><span
                                class="p">(</span><span class="n">version</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_id_code</span><span
                                class="p">(</span><span class="n">pmu_id_code</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_time</span><span class="p">(</span><span
                                class="n">soc</span><span class="p">,</span> <span class="n">frasec</span><span
                                class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-4'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-4'>#</a>
                    </div>
                    <h3>set_frame_type()</h3>
                    <p>Setter for <code>frame_type</code>.</p>
                    <p><strong>Params:</strong></p>
                    <ul>
                        <li><code>frame_type</code> <strong>(int)</strong> - Should be one of 6 possible values from
                            FRAME_TYPES dict.
                            Frame types with integer and binary representations are shown below.
                        </li>
                    </ul>
                    <hr/>
<pre><code>+--------------+----------+-----------+
    | Frame type | Decimal | Binary |
    +--------------+----------+-----------+
    | Data | 0 | 000 |
    +--------------+----------+-----------+
    | Header | 1 | 001 |
    +--------------+----------+-----------+
    | Config v1 | 2 | 010 |
    +--------------+----------+-----------+
    | Config v2 | 3 | 011 |
    +--------------+----------+-----------+
    | Command | 4 | 100 |
    +--------------+----------+-----------+
    | Config v3 | 5 | 101 |
    +--------------+----------+-----------+
</code></pre>
                    <p><strong>Raises:</strong></p>
<pre><code>FrameError
</code></pre>
                    <p>When <code>frame type</code> value provided is not specified in <code>FRAME_TYPES</code>.</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>    <span class="k">def</span> <span class="nf">set_frame_type</span><span
                                class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame_type</span><span
                                class="p">):</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-5'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-5'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="k">if</span> <span
                            class="n">frame_type</span> <span class="ow">not</span> <span class="ow">in</span> <span
                            class="n">CommonFrame</span><span class="o">.</span><span class="n">FRAME_TYPES</span><span
                            class="p">:</span>
            <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span class="s">&quot;Unknown frame type. Possible options: [data, header, cfg1, cfg2, cfg3, cmd].&quot;</span><span
                                class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">frame_type</span> <span
                                class="o">=</span> <span class="n">CommonFrame</span><span class="o">.</span><span
                                class="n">FRAME_TYPES</span><span class="p">[</span><span
                                class="n">frame_type</span><span class="p">]</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-6'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-6'>#</a>
                    </div>
                    <h3>set_version()</h3>
                    <p>Setter for frame IEEE standard <code>version</code>.</p>
                    <p><strong>Params:</strong></p>
                    <ul>
                        <li><code>version</code> <strong>(int)</strong> - Should be number between <code>1</code> and
                            <code>15</code>.
                        </li>
                    </ul>
                    <p><strong>Raises:</strong></p>
<pre><code>FrameError
</code></pre>
                    <p>When <code>version</code> value provided is out of range.</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>    <span class="k">def</span> <span class="nf">set_version</span><span
                                class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">version</span><span
                                class="p">):</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-7'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-7'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="k">if</span> <span class="ow">not</span> <span
                            class="mi">1</span> <span class="o">&lt;=</span> <span class="n">version</span> <span
                            class="o">&lt;=</span> <span class="mi">15</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span class="s">&quot;VERSION number out of range. 1&lt;= VERSION &lt;= 15&quot;</span><span
                                class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="o">=</span> <span
                                class="n">version</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-8'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-8'>#</a>
                    </div>
                    <h3>set_id_code()</h3>
                    <p>Setter for <code>pmu_id_code</code> as data stream identified.</p>
                    <p><strong>Params:</strong></p>
                    <ul>
                        <li><code>id_code</code> <strong>(int)</strong> - Should be number between <code>1</code> and
                            <code>65534</code>.
                        </li>
                    </ul>
                    <p><strong>Raises:</strong></p>
<pre><code>FrameError
</code></pre>
                    <p>When <code>id_code</code> value provided is out of range.</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>    <span class="k">def</span> <span class="nf">set_id_code</span><span
                                class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_code</span><span
                                class="p">):</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-9'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-9'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="k">if</span> <span class="ow">not</span> <span
                            class="mi">1</span> <span class="o">&lt;=</span> <span class="n">id_code</span> <span
                            class="o">&lt;=</span> <span class="mi">65534</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span class="s">&quot;ID CODE out of range. 1 &lt;= ID_CODE &lt;= 65534&quot;</span><span
                                class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pmu_id_code</span> <span
                                class="o">=</span> <span class="n">id_code</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-10'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-10'>#</a>
                    </div>
                    <h3>set_time()</h3>
                    <p>Setter for <code>soc</code> and <code>frasec</code>. If values for <code>soc</code> or <code>frasec</code>
                        are
                        not provided this method will calculate them.</p>
                    <p><strong>Params:</strong></p>
                    <ul>
                        <li><code>soc</code> <strong>(int)</strong> - UNIX timestamp, 32-bit unsigned number. See <code>set_soc()</code>
                            method.
                        </li>
                        <li><code>frasec</code> <strong>(int)</strong> or <strong>(tuple)</strong> - Fracion of second
                            and Time Quality. See
                            <code>set_frasec</code> method.
                        </li>
                    </ul>
                    <p><strong>Raises:</strong></p>
<pre><code>FrameError
</code></pre>
                    <p>When <code>soc</code> value provided is out of range.</p>
                    <p>When <code>frasec</code> is not valid.</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>    <span class="k">def</span> <span class="nf">set_time</span><span
                                class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">soc</span><span
                                class="p">,</span> <span class="n">frasec</span><span class="p">):</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-11'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-11'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="n">t</span> <span class="o">=</span> <span
                            class="n">time</span><span class="p">()</span> <span class="c"># Get current time, just in case that ``soc`` or ``frasec`` is ``None``.</span>

        <span class="k">if</span> <span class="n">soc</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_soc</span><span
                                class="p">(</span><span class="n">soc</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_soc</span><span
                                class="p">(</span><span class="nb">int</span><span class="p">(</span><span
                                class="n">t</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">frasec</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span
                                class="n">frasec</span><span class="p">,</span> <span class="n">collections</span><span
                                class="o">.</span><span class="n">Sequence</span><span class="p">):</span> <span
                                class="c"># If ``frasec`` is tuple or list unpack arguments.</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_frasec</span><span
                                class="p">(</span><span class="o">*</span><span class="n">frasec</span><span
                                class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_frasec</span><span
                                class="p">(</span><span class="n">frasec</span><span class="p">)</span> <span class="c"># Just set fraction of second and use default values for other arguments.</span>
        <span class="k">else</span><span class="p">:</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-12'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-12'>#</a>
                    </div>
                    <p>Calculate fraction of second (after decimal point) using only first 7 digits to avoid
                        overflow (24 bit number).</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>            <span class="bp">self</span><span class="o">.</span><span
                                class="n">set_frasec</span><span class="p">(</span><span class="nb">int</span><span
                                class="p">((((</span><span class="nb">repr</span><span class="p">((</span><span
                                class="n">t</span><span class="o">%</span><span class="mi">1</span><span
                                class="p">)))</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span
                                class="s">&#39;.&#39;</span><span class="p">))[</span><span class="mi">1</span><span
                                class="p">])[</span><span class="mi">0</span><span class="p">:</span><span
                                class="mi">6</span><span class="p">]))</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-13'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-13'>#</a>
                    </div>
                    <h3>set_soc()</h3>
                    <p>Setter for <code>soc</code> as second of century.</p>
                    <p><strong>Params:</strong></p>
                    <ul>
                        <li><code>soc</code> <strong>(int)</strong> - UNIX timestamp, should be between <code>0</code>
                            and <code>4294967295</code>.
                        </li>
                    </ul>
                    <p><strong>Raises:</strong></p>
<pre><code>FrameError
</code></pre>
                    <p>When <code>soc</code> value provided is out of range.</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>    <span class="k">def</span> <span class="nf">set_soc</span><span class="p">(</span><span
                                class="bp">self</span><span class="p">,</span> <span class="n">soc</span><span
                                class="p">):</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-14'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-14'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="k">if</span> <span class="ow">not</span> <span
                            class="mi">0</span> <span class="o">&lt;=</span> <span class="n">soc</span> <span class="o">&lt;=</span> <span
                            class="mi">4294967295</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span class="s">&quot;Time stamp out of range. 0 &lt;= SOC &lt;= 4294967295&quot;</span><span
                                class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">soc</span> <span
                                class="o">=</span> <span class="n">soc</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-15'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-15'>#</a>
                    </div>
                    <h3>set_frasec()</h3>
                    <p>Setter for <code>frasec</code> as Fraction of Second and Time Quality.</p>
                    <p><strong>Params:</strong></p>
                    <ul>
                        <li><code>fr_seconds</code> <strong>(int)</strong> - Fraction of Second as 24-bit unsigned
                            number.
                            Should be between <code>0</code> and <code>16777215</code>.
                        </li>
                        <li><code>leap_dir</code> <strong>(char)</strong> - Leap Second Direction: <code>+</code> for
                            add (<code>0</code>), <code>-</code> for
                            delete (<code>1</code>).
                            Default value: <code>+</code>.
                        </li>
                        <li><code>leap_occ</code> <strong>(bool)</strong> - Leap Second Occurred: <code>True</code> in
                            the first second after
                            the leap second occurs and remains set for 24h.
                        </li>
                        <li><code>leap_pen</code> <strong>(bool)</strong> - Leap Second Pending: <code>True</code> not
                            more than 60 s nor less
                            than 1 s before a leap second occurs, and cleared in the second after the leap
                            second occurs.
                        </li>
                        <li><code>time_quality</code> <strong>(int)</strong> - Message Time Quality represents
                            worst-case clock
                            accuracy according to UTC. Table below shows code values. Should be between <code>0</code>
                            and <code>15</code>.
                        </li>
                    </ul>
                    <hr/>
<pre><code>+------------+----------+---------------------------+
    | Binary | Decimal | Value |
    +------------+----------+---------------------------+
    | 1111 | 15 | Fault - clock failure. |
    +------------+----------+---------------------------+
    | 1011 | 11 | Time within 10s of UTC. |
    +------------+----------+---------------------------+
    | 1010 | 10 | Time within 1s of UTC. |
    +------------+----------+---------------------------+
    | 1001 | 9 | Time within 10^-1s of UTC.|
    +------------+----------+---------------------------+
    | 1000 | 8 | Time within 10^-2s of UTC.|
    +------------+----------+---------------------------+
    | 0111 | 7 | Time within 10^-3s of UTC.|
    +------------+----------+---------------------------+
    | 0110 | 6 | Time within 10^-4s of UTC.|
    +------------+----------+---------------------------+
    | 0101 | 5 | Time within 10^-5s of UTC.|
    +------------+----------+---------------------------+
    | 0100 | 4 | Time within 10^-6s of UTC.|
    +------------+----------+---------------------------+
    | 0011 | 3 | Time within 10^-7s of UTC.|
    +------------+----------+---------------------------+
    | 0010 | 2 | Time within 10^-8s of UTC.|
    +------------+----------+---------------------------+
    | 0001 | 1 | Time within 10^-9s of UTC.|
    +------------+----------+---------------------------+
    | 0000 | 0 | Clock locked to UTC. |
    +------------+----------+---------------------------+
</code></pre>
                    <p><strong>Raises:</strong></p>
<pre><code>FrameError
</code></pre>
                    <p>When <code>fr_seconds</code> value provided is out of range.</p>
                    <p>When <code>time_quality</code> value provided is out of range.</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>    <span class="k">def</span> <span class="nf">set_frasec</span><span
                                class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fr_seconds</span><span
                                class="p">,</span> <span class="n">leap_dir</span><span class="o">=</span><span
                                class="s">&#39;+&#39;</span><span class="p">,</span> <span
                                class="n">leap_occ</span><span class="o">=</span><span class="bp">False</span><span
                                class="p">,</span> <span class="n">leap_pen</span><span class="o">=</span><span
                                class="bp">False</span><span class="p">,</span> <span class="n">time_quality</span><span
                                class="o">=</span><span class="mi">0</span><span class="p">):</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-16'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-16'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="k">if</span> <span class="ow">not</span> <span
                            class="mi">0</span> <span class="o">&lt;=</span> <span class="n">fr_seconds</span> <span
                            class="o">&lt;=</span> <span class="mi">16777215</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span class="s">&quot;Frasec out of range. 0 &lt;= FRASEC &lt;= 16777215 &quot;</span><span
                                class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-17'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-17'>#</a>
                    </div>
                    <p>TODO: Values 12 - 14 are undefined.</p>
                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="k">if</span> <span class="ow">not</span> <span
                            class="mi">0</span> <span class="o">&lt;=</span> <span class="n">time_quality</span> <span
                            class="o">&lt;=</span> <span class="mi">15</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span class="s">&quot;Time quality flag out of range. 0 &lt;= MSG_TQ &lt;= 15&quot;</span><span
                                class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-18'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-18'>#</a>
                    </div>
                    <p>TODO: Validate leap_dir sign (+ or -).</p>
                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="n">frasec</span> <span class="o">=</span> <span
                            class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span>  <span
                            class="c"># Bit 7: Reserved for future use. Not important but it will be 1 for easier byte forming.</span>

        <span class="k">if</span> <span class="n">leap_dir</span> <span class="o">==</span> <span
                                class="s">&#39;-&#39;</span><span class="p">:</span> <span class="c"># Bit 6: Leap second direction [+ = 0] and [- = 1].</span>
            <span class="n">frasec</span> <span class="o">|=</span> <span class="mi">1</span>

        <span class="n">frasec</span> <span class="o">&lt;&lt;=</span> <span class="mi">1</span>

        <span class="k">if</span> <span class="n">leap_occ</span><span class="p">:</span>  <span class="c"># Bit 5: Leap Second Occurred, 1 in first second after leap second, remains 24h.</span>
            <span class="n">frasec</span> <span class="o">|=</span> <span class="mi">1</span>

        <span class="n">frasec</span> <span class="o">&lt;&lt;=</span> <span class="mi">1</span>

        <span class="k">if</span> <span class="n">leap_pen</span><span class="p">:</span>  <span class="c"># Bit 4: Leap Second Pending - shall be 1 not more then 60s nor less than 1s before leap second.</span>
            <span class="n">frasec</span> <span class="o">|=</span> <span class="mi">1</span>

        <span class="n">frasec</span> <span class="o">&lt;&lt;=</span> <span class="mi">4</span> <span class="c"># Shift left 4 bits for message time quality</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-19'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-19'>#</a>
                    </div>
                    <p>Bit 3 - 0: Message Time Quality indicator code - integer representation of bits (check
                        table).</p>
                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="n">frasec</span> <span class="o">|=</span> <span
                            class="n">time_quality</span>

        <span class="n">mask</span> <span class="o">=</span> <span class="mi">1</span> <span
                                class="o">&lt;&lt;</span> <span class="mi">7</span> <span class="c"># Change MSB to 0 for standard compliance.</span>
        <span class="n">frasec</span> <span class="o">^=</span> <span class="n">mask</span>

        <span class="n">frasec</span> <span class="o">&lt;&lt;=</span> <span class="mi">24</span> <span class="c"># Shift 24 bits for fractional time.</span>

        <span class="n">frasec</span> <span class="o">|=</span> <span class="n">fr_seconds</span> <span class="c"># Bits 23-0: Fraction of second.</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">frasec</span> <span class="o">=</span> <span
                                class="n">frasec</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-20'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-20'>#</a>
                    </div>
                    <h3>get_data_format()</h3>
                    <p>Getter for frame data format.</p>
                    <p><strong>Params:</strong></p>
                    <ul>
                        <li><code>data_format</code> <strong>(bytes)</strong> - Data format in data frames. Should be
                            16-bit flag.
                        </li>
                    </ul>
                    <p><strong>Returns:</strong></p>
                    <ul>
                        <li><code>dict</code> with PHASOR, ANALOG, and FREQ measurement size in bytes.
                            <code>{'phasor' : phasors_byte_size, 'analog' : analog_byte_size, 'freq' :
                                freq_byte_size}</code></li>
                    </ul>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>    <span class="k">def</span> <span class="nf">get_data_format_size</span><span class="p">(</span><span
                                class="n">data_format</span><span class="p">):</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-21'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-21'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="k">if</span> <span class="p">((</span><span
                            class="n">data_format</span> <span class="o">&amp;</span> <span class="mi">2</span><span
                            class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span
                            class="p">):</span>  <span class="c"># If second bit in data_format is 0 16x2 bits = 4 bytes otherwise 8 (2xfloat).</span>
            <span class="n">phasors_byte_size</span> <span class="o">=</span> <span class="mi">8</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">phasors_byte_size</span> <span class="o">=</span> <span class="mi">4</span>

        <span class="k">if</span> <span class="p">((</span><span class="n">data_format</span> <span
                                class="o">&amp;</span> <span class="mi">4</span><span class="p">)</span> <span
                                class="o">!=</span> <span class="mi">0</span><span class="p">):</span>  <span class="c"># If third bit in data_format is 0 16 bits = 2 bytes otherwise 4 bytes (float).</span>
            <span class="n">analog_byte_size</span> <span class="o">=</span> <span class="mi">4</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">analog_byte_size</span> <span class="o">=</span> <span class="mi">2</span>

        <span class="k">if</span> <span class="p">((</span><span class="n">data_format</span> <span
                                class="o">&amp;</span> <span class="mi">8</span><span class="p">)</span> <span
                                class="o">!=</span> <span class="mi">0</span><span class="p">):</span> <span class="c"># If fourth bit in data_format is 0 16 bits = 2 bytes otherwise 4 bytes (float).</span>
            <span class="n">freq_byte_size</span> <span class="o">=</span> <span class="mi">4</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">freq_byte_size</span> <span class="o">=</span> <span class="mi">2</span>

        <span class="k">return</span> <span class="p">{</span><span class="s">&#39;phasor&#39;</span> <span
                                class="p">:</span> <span class="n">phasors_byte_size</span><span
                                class="p">,</span> <span class="s">&#39;analog&#39;</span> <span
                                class="p">:</span> <span class="n">analog_byte_size</span><span class="p">,</span> <span
                                class="s">&#39;freq&#39;</span> <span class="p">:</span> <span
                                class="n">freq_byte_size</span><span class="p">}</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-22'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-22'>#</a>
                    </div>
                    <h3>set_data_fromat()</h3>
                    <p>Setter for frame data format. If number of data streams sent by PMUs is larger then
                        <code>1</code> data format should be provided for each data stream. Data format might be
                        represented as integer number as shown in table below where ordered letters represent
                        <code>(PHASOR_RECT/POLAR; PHASOR_INT/FLOAT; ANALOG_INT/FLOAT; FREQ_INT_FLOAT)</code> format,
                        where
                        <code>R</code> means RECTANGULAR, <code>P</code> means POLAR, <code>I</code> means 16 bit
                        INTEGER and <code>F</code> means FLOAT.
                        Beside this, data format might be provided as tuple of bool values ordered as mentioned
                        before.</p>
                    <hr/>
<pre><code>+--------------+----------+
    | Data Format | Decimal |
    +--------------+----------+
    | (R;I;I;I) | 0 |
    +--------------+----------+
    | (P;I;I;I) | 1 |
    +--------------+----------+
    | (R;F;I;I) | 2 |
    +--------------+----------+
    | (P;F;I;I) | 3 |
    +--------------+----------+
    | (R;I;F;I) | 4 |
    +--------------+----------+
    | (P;I;F;I) | 5 |
    +--------------+----------+
    | (R;F;F;I) | 6 |
    +--------------+----------+
    | (P;F;F;I) | 7 |
    +--------------+----------+
    | (R;I;I;F) | 8 |
    +--------------+----------+
    | (P;I;I;F) | 9 |
    +--------------+----------+
    | (R;F;I;F) | 10 |
    +--------------+----------+
    | (P;F;I;F) | 11 |
    +--------------+----------+
    | (R;I;F;F) | 12 |
    +--------------+----------+
    | (P;I;F;F) | 13 |
    +--------------+----------+
    | (R;F;F;F) | 14 |
    +--------------+----------+
    | (P;F;F;F) | 15 |
    +--------------+----------+
</code></pre>
                    <p><strong>Params:</strong></p>
                    <ul>
                        <li><code>data_format</code> <strong>(mixed)</strong> - If number of data streams is larger then
                            <code>1</code> should be list
                            of tuples or integers, otherwise single <code>tuple</code> or <code>int</code> expected.
                        </li>
                        <li><code>num_streams</code> <strong>(int)</strong> - Number of data measurement streams packed
                            in one data frame.
                        </li>
                    </ul>
                    <p><strong>Raises:</strong></p>
<pre><code>FrameError
</code></pre>
                    <p>When length of <code>data_fomat</code> list is not equal to <code>num_stream</code> and <code>num_stream</code>
                        is
                        larger then <code>1</code>.</p>
                    <p>When <code>data_format</code> value provided is out of range.</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>    <span class="k">def</span> <span class="nf">set_data_format</span><span
                                class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_format</span><span
                                class="p">,</span> <span class="n">num_streams</span><span class="p">):</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-23'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-23'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="k">if</span> <span
                            class="n">num_streams</span> <span class="o">&gt;</span> <span class="mi">1</span><span
                            class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span
                                class="p">(</span><span class="n">data_format</span><span class="p">,</span> <span
                                class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span
                                class="n">num_streams</span> <span class="o">!=</span> <span class="nb">len</span><span
                                class="p">(</span><span class="n">data_format</span><span class="p">):</span>
                <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span class="s">&quot;When NUM_STREAMS &gt; 1 provide FORMATs as list with NUM_STREAMS elements.&quot;</span><span
                                class="p">)</span>

            <span class="n">data_formats</span> <span class="o">=</span> <span class="p">[]</span> <span class="c">#Format tuples transformed to ints</span>
            <span class="k">for</span> <span class="n">format_type</span> <span class="ow">in</span> <span class="n">data_format</span><span
                                class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">format_type</span><span
                                class="p">,</span><span class="nb">tuple</span><span class="p">):</span>  <span
                                class="c"># If data formats are specified as tuples then convert them to ints</span>
                    <span class="n">data_formats</span><span class="o">.</span><span class="n">append</span><span
                                class="p">(</span><span class="n">CommonFrame</span><span class="o">.</span><span
                                class="n">format2int</span><span class="p">(</span><span class="o">*</span><span
                                class="n">format_type</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span
                                class="n">format_type</span> <span class="o">&lt;=</span> <span
                                class="mi">15</span><span class="p">:</span> <span class="c">#If data formats are specified as ints check range</span>
                        <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span
                                class="s">&quot;Format Type out of range. 0 &lt;= FORMAT &lt;= 15&quot;</span><span
                                class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">data_formats</span><span class="o">.</span><span class="n">append</span><span
                                class="p">(</span><span class="n">format_type</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">data_format</span> <span
                                class="o">=</span> <span class="n">data_formats</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data_format</span><span
                                class="p">,</span><span class="nb">tuple</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">data_format</span> <span
                                class="o">=</span> <span class="n">CommonFrame</span><span class="o">.</span><span
                                class="n">format2int</span><span class="p">(</span><span class="o">*</span><span
                                class="n">data_format</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="mi">0</span> <span
                                class="o">&lt;=</span> <span class="n">data_format</span> <span
                                class="o">&lt;=</span> <span class="mi">15</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span
                                class="s">&quot;Format Type out of range. 0 &lt;= FORMAT &lt;= 15&quot;</span><span
                                class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">data_format</span> <span
                                class="o">=</span> <span class="n">data_format</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-24'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-24'>#</a>
                    </div>
                    <h3>format2int()</h3>
                    <p>Convert <code>boolean</code> representation of data format to integer.</p>
                    <p><strong>Params:</strong></p>
                    <ul>
                        <li><code>phasor_polar</code> <strong>(bool)</strong> - If <code>True</code> phasor represented
                            using magnitude and angle (polar)
                            else rectangular.
                        </li>
                        <li><code>phasor_float</code> <strong>(bool)</strong> - If <code>True</code> phasor represented
                            using floating point format else
                            represented as 16 bit integer.
                        </li>
                        <li><code>analogs_float</code> <strong>(bool)</strong> - If <code>True</code> analog values
                            represented using floating point notation
                            else represented as 16 bit integer.
                        </li>
                        <li><code>freq_float</code> <strong>(bool)</strong> - If <code>True</code> FREQ/DFREQ
                            represented using floating point notation
                            else represented as 16 bit integer.
                        </li>
                    </ul>
                    <p><strong>Returns:</strong></p>
                    <ul>
                        <li><code>int</code> representation of data format.</li>
                    </ul>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>    <span class="k">def</span> <span class="nf">format2int</span><span
                                class="p">(</span><span class="n">phasor_polar</span><span class="o">=</span><span
                                class="bp">False</span><span class="p">,</span> <span class="n">phasor_float</span><span
                                class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">analogs_float</span><span
                                class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">freq_float</span><span
                                class="o">=</span><span class="bp">False</span><span class="p">):</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-25'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-25'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="n">data_format</span> <span
                            class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span
                            class="mi">1</span>

        <span class="k">if</span> <span class="n">freq_float</span><span class="p">:</span>
            <span class="n">data_format</span> <span class="o">|=</span> <span class="mi">1</span>
        <span class="n">data_format</span> <span class="o">&lt;&lt;=</span> <span class="mi">1</span>

        <span class="k">if</span> <span class="n">analogs_float</span><span class="p">:</span>
            <span class="n">data_format</span> <span class="o">|=</span> <span class="mi">1</span>
        <span class="n">data_format</span> <span class="o">&lt;&lt;=</span> <span class="mi">1</span>

        <span class="k">if</span> <span class="n">phasor_float</span><span class="p">:</span>
            <span class="n">data_format</span> <span class="o">|=</span> <span class="mi">1</span>
        <span class="n">data_format</span> <span class="o">&lt;&lt;=</span> <span class="mi">1</span>

        <span class="k">if</span> <span class="n">phasor_polar</span><span class="p">:</span>
            <span class="n">data_format</span> <span class="o">|=</span> <span class="mi">1</span>

        <span class="n">mask</span> <span class="o">=</span> <span class="mi">1</span> <span
                                class="o">&lt;&lt;</span> <span class="mi">4</span>
        <span class="n">data_format</span> <span class="o">^=</span> <span class="n">mask</span>

        <span class="k">return</span> <span class="n">data_format</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-26'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-26'>#</a>
                    </div>
                    <h2>ConfigFrame1</h2>
                    <p>ConfigFrame1 is class which represents configuration frame v1.</p>
                    <p>Class implements two abstract methods from super class.</p>
                    <ul>
                        <li><code>convert2bytes()</code> - for converting ConfigFrame1 to bytes.</li>
                        <li><code>convert2frame()</code> - which converts array of bytes to ConfigFrame1.</li>
                    </ul>
                    <p>Each instance of ConfigFrame1 class will have following attributes.</p>
                    <p><strong>Attributes:</strong></p>
                    <ul>
                        <li><code>frame_type</code> <strong>(int)</strong> - Defines frame type. Inherited from <code>CommonFrame</code>.
                        </li>
                        <li><code>version</code> <strong>(int)</strong> - Standard version. Inherited from <code>CommonFrame</code>.
                            Default value: <code>1</code>.
                        </li>
                        <li><code>pmu_id_code</code> <strong>(int)</strong> - PMU Id code which identifies data stream.
                            Inherited from <code>CommonFrame</code>.
                        </li>
                        <li><code>soc</code> <strong>(int)</strong> - UNIX timestamp. Default value: <code>None</code>.
                            Inherited from <code>CommonFrame</code>.
                        </li>
                        <li><code>frasec</code> <strong>(int)</strong> - Fraction of second and Time Quality. Default
                            value: <code>None</code>.
                            Inherited from <code>CommonFrame</code>.
                        </li>
                        <li><code>time_base</code> <strong>(int)</strong> - Resolution of the fractional second time
                            stamp in all frames.
                        </li>
                        <li><code>num_pmu</code> <strong>(int)</strong> - Number of PMUs (data streams) included in
                            single <code>DataFrame</code>.
                        </li>
                        <li><code>multistreaming</code> <strong>(bool)</strong> - <code>True</code> if <code>num_pmu
                            &gt; 1</code>. That means data frame consist of multiple
                            measurement streams.
                        </li>
                        <li><code>station_name</code> <strong>(mixed)</strong> - Station name <code>(string)</code> or
                            station names <code>(list)</code> if <code>multistreaming</code>.
                        </li>
                        <li><code>id_code</code> <strong>(mixed)</strong> - Measurement stream ID code
                            <code>(int)</code> or <code>(list)</code> if <code>multistreaming</code>. Each ID
                            identifies source PMU of each data block.
                        </li>
                        <li><code>data_format</code> <strong>(mixed)</strong> - Data format for each data stream.
                            Inherited from <code>CommonFrame</code>.
                        </li>
                        <li><code>phasor_num</code> <strong>(mixed)</strong> - Number of phasors <code>(int)</code> or
                            <code>(list)</code> if <code>multistreaming</code>.
                        </li>
                        <li><code>analog_num</code> <strong>(mixed)</strong> - Number of analog values
                            <code>(int)</code> or <code>(list)</code> if <code>multistreaming</code>.
                        </li>
                        <li><code>digital_num</code> <strong>(mixed)</strong> - Number of digital status words <code>(int)</code>
                            or <code>(list)</code> if <code>multistreaming</code>.
                        </li>
                        <li><code>channel_names</code> <strong>(list)</strong> - List of phasor and channel names for
                            phasor, analog and digital channel.
                            If <code>multistreaming</code> it's list of lists.
                        </li>
                        <li><code>ph_units</code> <strong>(list)</strong> - Conversion factor for phasor channels. If
                            <code>multistreaming</code> list of lists.
                        </li>
                        <li><code>an_units</code> <strong>(list)</strong> - Conversion factor for analog channels. If
                            <code>multistreaming</code> list of lists.
                        </li>
                        <li><code>dig_units</code> <strong>(list)</strong> - Mask words for digital status word. If
                            <code>multistreaming</code> list of lists.
                        </li>
                        <li><code>fnom</code> <strong>(mixed)</strong> - Nominal frequency code and flags. If <code>multistreaming</code>
                            list of ints.
                        </li>
                        <li><code>cfg_count</code> <strong>(mixed)</strong> - Configuration change count. If <code>multistreaming</code>
                            list of ints.
                        </li>
                        <li><code>data_rate</code> <strong>(int)</strong> - Frames per second or seconds per frame (if
                            negative <code>int</code>).
                        </li>
                    </ul>
                    <p><strong>Raises:</strong></p>
<pre><code>FrameError
</code></pre>
                    <p>When it's not possible to create valid frame, usually due invalid parameter value.</p>
                </div>
                <div class='code'>
                    <div class="highlight"><pre>    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">convert2bytes</span><span class="p">(</span><span class="bp">self</span><span
                                class="p">):</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">convert2frame</span><span class="p">(</span><span
                                class="n">byte_data</span><span class="p">):</span>
        <span class="k">pass</span>


<span class="k">class</span> <span class="nc">ConfigFrame1</span><span class="p">(</span><span
                                class="n">CommonFrame</span><span class="p">):</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-27'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-27'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>    <span class="k">pass</span> <span class="c"># TODO: Implement ConfigFrame1</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-28'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-28'>#</a>
                    </div>
                    <h2>ConfigFrame2</h2>
                    <p>ConfigFrame2 is class which represents configuration frame v2.</p>
                    <p>Class implements two abstract methods from super class.</p>
                    <ul>
                        <li><code>convert2bytes()</code> - for converting ConfigFrame2 to bytes.</li>
                        <li><code>convert2frame()</code> - which converts array of bytes to ConfigFrame2.</li>
                    </ul>
                    <p>Each instance of ConfigFrame2 class will have following attributes.</p>
                    <p><strong>Attributes:</strong></p>
                    <ul>
                        <li><code>frame_type</code> <strong>(int)</strong> - Defines frame type. Inherited from <code>CommonFrame</code>.
                        </li>
                        <li><code>version</code> <strong>(int)</strong> - Standard version. Inherited from <code>CommonFrame</code>.
                            Default value: <code>1</code>.
                        </li>
                        <li><code>pmu_id_code</code> <strong>(int)</strong> - PMU Id code which identifies data stream.
                            Inherited from <code>CommonFrame</code>.
                        </li>
                        <li><code>soc</code> <strong>(int)</strong> - UNIX timestamp. Default value: <code>None</code>.
                            Inherited from <code>CommonFrame</code>.
                        </li>
                        <li><code>frasec</code> <strong>(int)</strong> - Fraction of second and Time Quality. Default
                            value: <code>None</code>.
                            Inherited from <code>CommonFrame</code>.
                        </li>
                        <li><code>time_base</code> <strong>(int)</strong> - Resolution of the fractional second time
                            stamp in all frames.
                        </li>
                        <li><code>num_pmu</code> <strong>(int)</strong> - Number of PMUs (data streams) included in
                            single <code>DataFrame</code>.
                        </li>
                        <li><code>multistreaming</code> <strong>(bool)</strong> - <code>True</code> if <code>num_pmu
                            &gt; 1</code>. That means data frame consist of multiple
                            measurement streams.
                        </li>
                        <li><code>station_name</code> <strong>(mixed)</strong> - Station name <code>(string)</code> or
                            station names <code>(list)</code> if <code>multistreaming</code>.
                        </li>
                        <li><code>id_code</code> <strong>(mixed)</strong> - Measurement stream ID code
                            <code>(int)</code> or <code>(list)</code> if <code>multistreaming</code>. Each ID
                            identifies source PMU of each data block.
                        </li>
                        <li><code>data_format</code> <strong>(mixed)</strong> - Data format for each data stream.
                            Inherited from <code>CommonFrame</code>.
                        </li>
                        <li><code>phasor_num</code> <strong>(mixed)</strong> - Number of phasors <code>(int)</code> or
                            <code>(list)</code> if <code>multistreaming</code>.
                        </li>
                        <li><code>analog_num</code> <strong>(mixed)</strong> - Number of analog values
                            <code>(int)</code> or <code>(list)</code> if <code>multistreaming</code>.
                        </li>
                        <li><code>digital_num</code> <strong>(mixed)</strong> - Number of digital status words <code>(int)</code>
                            or <code>(list)</code> if <code>multistreaming</code>.
                        </li>
                        <li><code>channel_names</code> <strong>(list)</strong> - List of phasor and channel names for
                            phasor, analog and digital channel.
                            If <code>multistreaming</code> it's list of lists.
                        </li>
                        <li><code>ph_units</code> <strong>(list)</strong> - Conversion factor for phasor channels. If
                            <code>multistreaming</code> list of lists.
                        </li>
                        <li><code>an_units</code> <strong>(list)</strong> - Conversion factor for analog channels. If
                            <code>multistreaming</code> list of lists.
                        </li>
                        <li><code>dig_units</code> <strong>(list)</strong> - Mask words for digital status word. If
                            <code>multistreaming</code> list of lists.
                        </li>
                        <li><code>fnom</code> <strong>(mixed)</strong> - Nominal frequency code and flags. If <code>multistreaming</code>
                            list of ints.
                        </li>
                        <li><code>cfg_count</code> <strong>(mixed)</strong> - Configuration change count. If <code>multistreaming</code>
                            list of ints.
                        </li>
                        <li><code>data_rate</code> <strong>(int)</strong> - Frames per second or seconds per frame (if
                            negative <code>int</code>).
                        </li>
                    </ul>
                    <p><strong>Raises:</strong></p>
<pre><code>FrameError
</code></pre>
                    <p>When it's not possible to create valid frame, usually due invalid parameter value.</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre><span class="k">class</span> <span class="nc">ConfigFrame2</span><span
                                class="p">(</span><span class="n">CommonFrame</span><span class="p">):</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-29'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-29'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-30'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-30'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">__init__</span><span
                            class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pmu_id_code</span><span
                            class="p">,</span> <span class="n">time_base</span><span class="p">,</span> <span class="n">num_pmu</span><span
                            class="p">,</span> <span class="n">station_name</span><span class="p">,</span> <span
                            class="n">id_code</span><span class="p">,</span> <span class="n">data_format</span><span
                            class="p">,</span> <span class="n">phasor_num</span><span class="p">,</span> <span
                            class="n">analog_num</span><span class="p">,</span>
                 <span class="n">digital_num</span><span class="p">,</span> <span class="n">channel_names</span><span
                                class="p">,</span> <span class="n">ph_units</span><span class="p">,</span> <span
                                class="n">an_units</span><span class="p">,</span> <span class="n">dig_units</span><span
                                class="p">,</span> <span class="n">f_nom</span><span class="p">,</span> <span class="n">cfg_count</span><span
                                class="p">,</span> <span class="n">data_rate</span><span class="p">,</span>
                 <span class="n">soc</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span
                                class="n">frasec</span><span class="o">=</span><span class="bp">None</span><span
                                class="p">,</span> <span class="n">version</span><span class="o">=</span><span
                                class="mi">1</span><span class="p">):</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span
                                class="n">__init__</span><span class="p">(</span><span
                                class="s">&#39;cfg2&#39;</span><span class="p">,</span> <span
                                class="n">pmu_id_code</span><span class="p">,</span> <span class="n">soc</span><span
                                class="p">,</span> <span class="n">frasec</span><span class="p">,</span> <span
                                class="n">version</span><span class="p">)</span> <span class="c"># Init CommonFrame with &#39;cfg2&#39; frame type</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_time_base</span><span class="p">(</span><span
                                class="n">time_base</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_num_pmu</span><span
                                class="p">(</span><span class="n">num_pmu</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_stn_names</span><span class="p">(</span><span
                                class="n">station_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_config_id_code</span><span
                                class="p">(</span><span class="n">id_code</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_data_format</span><span
                                class="p">(</span><span class="n">data_format</span><span class="p">,</span> <span
                                class="n">num_pmu</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_phasor_num</span><span
                                class="p">(</span><span class="n">phasor_num</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_analog_num</span><span
                                class="p">(</span><span class="n">analog_num</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_digital_num</span><span
                                class="p">(</span><span class="n">digital_num</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_channel_names</span><span
                                class="p">(</span><span class="n">channel_names</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_phasor_units</span><span
                                class="p">(</span><span class="n">ph_units</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_analog_units</span><span
                                class="p">(</span><span class="n">an_units</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_digital_units</span><span
                                class="p">(</span><span class="n">dig_units</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_fnom</span><span class="p">(</span><span
                                class="n">f_nom</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_cfg_count</span><span class="p">(</span><span
                                class="n">cfg_count</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_data_rate</span><span class="p">(</span><span
                                class="n">data_rate</span><span class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-31'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-31'>#</a>
                    </div>
                    <h3>set_time_base()</h3>
                    <p>Setter for time base. Resolution of the fractional second time stamp (FRASEC).
                        Bits 31-24: Reserved for flags (high 8 bits).
                        Bits 23-0: 24-bit unsigned integer which subdivision of the second that the FRASEC
                        is based on.</p>
                    <p><strong>Params:</strong></p>
                    <ul>
                        <li><code>time_base</code> <strong>(int)</strong> - Should be number between <code>1</code> and
                            <code>16777215</code>.
                        </li>
                    </ul>
                    <p><strong>Raises:</strong></p>
<pre><code>FrameError
</code></pre>
                    <p>When <code>time_base</code> value provided is out of range.</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>    <span class="k">def</span> <span class="nf">set_time_base</span><span
                                class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time_base</span><span
                                class="p">):</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-32'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-32'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="k">if</span> <span class="ow">not</span> <span
                            class="mi">1</span> <span class="o">&lt;=</span> <span class="n">time_base</span> <span
                            class="o">&lt;=</span> <span class="mi">16777215</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span class="s">&quot;Time Base out of range. 1 &lt;= TIME_BASE &lt;= 16777215 &quot;</span><span
                                class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">time_base</span> <span
                                class="o">=</span> <span class="n">time_base</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-33'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-33'>#</a>
                    </div>
                    <h3>set_num_pmu()</h3>
                    <p>Setter for number of PMUs. The number of PMUs included in data frame. No limit
                        specified. The actual limit will be determined by the limit of 65 535 bytes in one
                        frame (FRAMESIZE filed).</p>
                    <p>Also, if <code>num_pmu</code> &gt; <code>1</code> multistreaming will be set to <code>True</code>
                        meaning that
                        more then one data stream will be sent inside data frame.</p>
                    <p><strong>Params:</strong></p>
                    <ul>
                        <li><code>num_pmu</code> <strong>(int)</strong> - Should be number between <code>1</code> and
                            <code>65535</code>.
                        </li>
                    </ul>
                    <p><strong>Raises:</strong></p>
<pre><code>FrameError
</code></pre>
                    <p>When <code>num_pmu</code> value provided is out of range.</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>    <span class="k">def</span> <span class="nf">set_num_pmu</span><span
                                class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_pmu</span><span
                                class="p">):</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-34'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-34'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="k">if</span> <span class="ow">not</span> <span
                            class="mi">1</span> <span class="o">&lt;=</span> <span class="n">num_pmu</span> <span
                            class="o">&lt;=</span> <span class="mi">65535</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span class="s">&quot;Number of PMUs out of range. 1 &lt;= NUM_PMU &lt;= 65535&quot;</span><span
                                class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">num_pmu</span> <span class="o">=</span> <span
                                class="n">num_pmu</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">multistreaming</span> <span
                                class="o">=</span> <span class="bp">True</span> <span class="k">if</span> <span
                                class="n">num_pmu</span> <span class="o">&gt;</span> <span class="mi">1</span> <span
                                class="k">else</span> <span class="bp">False</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-35'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-35'>#</a>
                    </div>
                    <h3>set_stn_names()</h3>
                    <p>Setter for station names.</p>
                    <p>If <code>multistreaming</code> should be list of <code>num_pmu</code> station names otherwise 16
                        character ASCII string.</p>
                    <p><strong>Params:</strong></p>
                    <ul>
                        <li><code>station_name</code> <strong>(mixed)</strong> - Should be 16 bytes (16 ASCII
                            characters) string
                            or list of strings.
                        </li>
                    </ul>
                    <p><strong>Raises:</strong></p>
<pre><code>FrameError
</code></pre>
                    <p>When <code>station_name</code> is not list with length <code>num_pmu</code> when <code>multistreaming</code>.
                    </p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>    <span class="k">def</span> <span class="nf">set_stn_names</span><span
                                class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">station_name</span><span
                                class="p">):</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-36'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-36'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="k">if</span> <span class="bp">self</span><span
                            class="o">.</span><span class="n">multistreaming</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span
                                class="p">(</span><span class="n">station_name</span><span class="p">,</span> <span
                                class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span
                                class="bp">self</span><span class="o">.</span><span class="n">num_pmu</span> <span
                                class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">station_name</span><span
                                class="p">):</span>
                <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span class="s">&quot;When NUM_PMU &gt; 1 provide station names as list with NUM_PMU elements.&quot;</span><span
                                class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">station_name</span> <span
                                class="o">=</span> <span class="p">[</span><span class="n">station</span><span
                                class="p">[:</span><span class="mi">16</span><span class="p">]</span><span
                                class="o">.</span><span class="n">ljust</span><span class="p">(</span><span class="mi">16</span><span
                                class="p">,</span><span class="s">&#39; &#39;</span><span class="p">)</span> <span
                                class="k">for</span> <span class="n">station</span> <span class="ow">in</span> <span
                                class="n">station_name</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">station_name</span> <span
                                class="o">=</span> <span class="n">station_name</span><span class="p">[:</span><span
                                class="mi">16</span><span class="p">]</span><span class="o">.</span><span class="n">ljust</span><span
                                class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="s">&#39; &#39;</span><span
                                class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-37'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-37'>#</a>
                    </div>
                    <h3>set_config_id_code()</h3>
                    <p>Setter for data stream IDs inside data frame.</p>
                    <p>If <code>multistreaming</code> should be
                        a list of IDs otherwise should be same as <code>pmu_id_code</code>.</p>
                    <p><strong>Params:</strong></p>
                    <ul>
                        <li><code>id_code</code> <strong>(mixed)</strong> - Should be number between <code>1</code> and
                            <code>65534</code>.
                            If <code>multistreaming</code> list of numbers.
                        </li>
                    </ul>
                    <p><strong>Raises:</strong></p>
<pre><code>FrameError
</code></pre>
                    <p>When <code>id_code</code> is not list with length <code>num_pmu</code> when
                        <code>multistreaming</code>.
                        When <code>id_code</code> value is out of range.</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>    <span class="k">def</span> <span class="nf">set_config_id_code</span><span
                                class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_code</span><span
                                class="p">):</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-38'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-38'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="k">if</span> <span class="bp">self</span><span
                            class="o">.</span><span class="n">multistreaming</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span
                                class="p">(</span><span class="n">id_code</span><span class="p">,</span> <span
                                class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span
                                class="bp">self</span><span class="o">.</span><span class="n">num_pmu</span> <span
                                class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">id_code</span><span
                                class="p">):</span>
                <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span class="s">&quot;When NUM_PMU &gt; 1 provide PMU ID codes as list with NUM_PMU elements.&quot;</span><span
                                class="p">)</span>

            <span class="k">for</span> <span class="n">stream_id</span> <span class="ow">in</span> <span class="n">id_code</span><span
                                class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="mi">1</span> <span
                                class="o">&lt;=</span> <span class="n">stream_id</span> <span
                                class="o">&lt;=</span> <span class="mi">65534</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span
                                class="s">&quot;ID CODE out of range. 1 &lt;= ID_CODE &lt;= 65534&quot;</span><span
                                class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="mi">1</span> <span class="o">&lt;=</span> <span
                                class="n">id_code</span> <span class="o">&lt;=</span> <span class="mi">65534</span><span
                                class="p">:</span>
                    <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span
                                class="s">&quot;ID CODE out of range. 1 &lt;= ID_CODE &lt;= 65534&quot;</span><span
                                class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">id_code</span> <span
                                class="o">=</span> <span class="n">id_code</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-39'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-39'>#</a>
                    </div>
                    <h3>set_phasor_num()</h3>
                    <p>Setter for number of phasor measurements. Should be specified for each
                        data stream in data frame.</p>
                    <p>If <code>multistreaming</code> should be a list of <code>integers</code> otherwise should be
                        <code>integer</code>.</p>
                    <p><strong>Params:</strong></p>
                    <ul>
                        <li><code>phasor_num</code> <strong>(mixed)</strong> - Should be integer between <code>1</code>
                            and <code>65535</code>.
                            If <code>multistreaming</code> list of numbers.
                        </li>
                    </ul>
                    <p><strong>Raises:</strong></p>
<pre><code>FrameError
</code></pre>
                    <p>When <code>phasor_num</code> is not list with length <code>num_pmu</code> when <code>multistreaming</code>.
                        When <code>phasor_num</code> value is out of range.</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>    <span class="k">def</span> <span class="nf">set_phasor_num</span><span
                                class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">phasor_num</span><span
                                class="p">):</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-40'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-40'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="k">if</span> <span class="bp">self</span><span
                            class="o">.</span><span class="n">multistreaming</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span
                                class="p">(</span><span class="n">phasor_num</span><span class="p">,</span> <span
                                class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span
                                class="bp">self</span><span class="o">.</span><span class="n">num_pmu</span> <span
                                class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">phasor_num</span><span
                                class="p">):</span>
                <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span class="s">&quot;When NUM_PMU &gt; 1 provide PHNMR as list with NUM_PMU elements.&quot;</span><span
                                class="p">)</span>

            <span class="k">for</span> <span class="n">phnmr</span> <span class="ow">in</span> <span class="n">phasor_num</span><span
                                class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="mi">0</span> <span
                                class="o">&lt;=</span> <span class="n">phnmr</span> <span class="o">&lt;=</span> <span
                                class="mi">65535</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span
                                class="s">&quot;Number of phasors out of range. 0 &lt;= PHNMR &lt;= 65535&quot;</span><span
                                class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span
                                class="n">phasor_num</span> <span class="o">&lt;=</span> <span
                                class="mi">65535</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span
                                class="s">&quot;Number of phasors out of range. 0 &lt;= PHNMR &lt;= 65535&quot;</span><span
                                class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">phasor_num</span> <span
                                class="o">=</span> <span class="n">phasor_num</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-41'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-41'>#</a>
                    </div>
                    <h3>set_analog_num()</h3>
                    <p>Setter for number analog values. Should be specified for each
                        data stream in data frame.</p>
                    <p>If <code>multistreaming</code> should be a list of <code>integers</code> otherwise should be
                        <code>integer</code>.</p>
                    <p><strong>Params:</strong></p>
                    <ul>
                        <li><code>analog_num</code> <strong>(mixed)</strong> - Should be integer between <code>1</code>
                            and <code>65535</code>.
                            If <code>multistreaming</code> list of numbers.
                        </li>
                    </ul>
                    <p><strong>Raises:</strong></p>
<pre><code>FrameError
</code></pre>
                    <p>When <code>analog_num</code> is not list with length <code>num_pmu</code> when <code>multistreaming</code>.
                        When <code>analog_num</code> value is out of range.</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>    <span class="k">def</span> <span class="nf">set_analog_num</span><span
                                class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">analog_num</span><span
                                class="p">):</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-42'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-42'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="k">if</span> <span class="bp">self</span><span
                            class="o">.</span><span class="n">multistreaming</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span
                                class="p">(</span><span class="n">analog_num</span><span class="p">,</span> <span
                                class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span
                                class="bp">self</span><span class="o">.</span><span class="n">num_pmu</span> <span
                                class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">analog_num</span><span
                                class="p">):</span>
                <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span class="s">&quot;When NUM_PMU &gt; 1 provide ANNMR as list with NUM_PMU elements.&quot;</span><span
                                class="p">)</span>

            <span class="k">for</span> <span class="n">annmr</span> <span class="ow">in</span> <span class="n">analog_num</span><span
                                class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="mi">0</span> <span
                                class="o">&lt;=</span> <span class="n">annmr</span> <span class="o">&lt;=</span> <span
                                class="mi">65535</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span
                                class="s">&quot;Number of phasors out of range. 0 &lt;= ANNMR &lt;= 65535&quot;</span><span
                                class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span
                                class="n">analog_num</span> <span class="o">&lt;=</span> <span
                                class="mi">65535</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span
                                class="s">&quot;Number of phasors out of range. 0 &lt;= ANNMR &lt;= 65535&quot;</span><span
                                class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">analog_num</span> <span
                                class="o">=</span> <span class="n">analog_num</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-43'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-43'>#</a>
                    </div>
                    <h3>set_digital_num()</h3>
                    <p>Setter for number of digital status words. Should be specified for each
                        data stream in data frame.</p>
                    <p>If <code>multistreaming</code> should be a list of <code>integers</code> otherwise should be
                        <code>integer</code>.</p>
                    <p><strong>Params:</strong></p>
                    <ul>
                        <li><code>digital_num</code> <strong>(mixed)</strong> - Should be integer between <code>1</code>
                            and <code>65535</code>.
                            If <code>multistreaming</code> list of numbers.
                        </li>
                    </ul>
                    <p><strong>Raises:</strong></p>
<pre><code>FrameError
</code></pre>
                    <p>When <code>digital_num</code> is not list with length <code>num_pmu</code> when <code>multistreaming</code>.
                        When <code>digital_num</code> value is out of range.</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>    <span class="k">def</span> <span class="nf">set_digital_num</span><span
                                class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">digital_num</span><span
                                class="p">):</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-44'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-44'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="k">if</span> <span class="bp">self</span><span
                            class="o">.</span><span class="n">multistreaming</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span
                                class="p">(</span><span class="n">digital_num</span><span class="p">,</span> <span
                                class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span
                                class="bp">self</span><span class="o">.</span><span class="n">num_pmu</span> <span
                                class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">digital_num</span><span
                                class="p">):</span>
                <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span class="s">&quot;When NUM_PMU &gt; 1 provide DGNMR as list with NUM_PMU elements.&quot;</span><span
                                class="p">)</span>

            <span class="k">for</span> <span class="n">dgnmr</span> <span class="ow">in</span> <span class="n">digital_num</span><span
                                class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="mi">0</span> <span
                                class="o">&lt;=</span> <span class="n">dgnmr</span> <span class="o">&lt;=</span> <span
                                class="mi">65535</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span
                                class="s">&quot;Number of phasors out of range. 0 &lt;= DGNMR &lt;= 65535&quot;</span><span
                                class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span
                                class="n">digital_num</span> <span class="o">&lt;=</span> <span
                                class="mi">65535</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span
                                class="s">&quot;Number of phasors out of range. 0 &lt;= DGNMR &lt;= 65535&quot;</span><span
                                class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">digital_num</span> <span class="o">=</span> <span
                                class="n">digital_num</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-45'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-45'>#</a>
                    </div>
                    <h3>set_channel_names()</h3>
                    <p>Setter for phasor and channel names.</p>
                    <p><strong>Params:</strong></p>
                    <ul>
                        <li><code>channel_names</code> <strong>(list)</strong> - Should be list of strings (16 ASCII
                            character) with
                            <code>PHASOR_NUM</code> + <code>ANALOG_NUM</code> + 16 * <code>DIGITAL_NUM</code> elements.
                            If <code>multistreaming</code> should be list of lists.
                        </li>
                    </ul>
                    <p><strong>Raises:</strong></p>
<pre><code>FrameError
</code></pre>
                    <p>When <code>channel_names</code> is not list of lists with length <code>num_pmu</code> when <code>multistreaming</code>.
                        When <code>channel_names</code> is not list with <code>PHASOR_NUM</code> +
                        <code>ANALOG_NUM</code> +
                        + 16 * <code>DIGITAL_NUM</code> elements.</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>    <span class="k">def</span> <span class="nf">set_channel_names</span><span
                                class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel_names</span><span
                                class="p">):</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-46'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-46'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="k">if</span> <span class="bp">self</span><span
                            class="o">.</span><span class="n">multistreaming</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span
                                class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span
                                class="n">el</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span
                                class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span
                                class="n">channel_names</span><span class="p">)</span> <span class="ow">or</span> <span
                                class="bp">self</span><span class="o">.</span><span class="n">num_pmu</span> <span
                                class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">channel_names</span><span
                                class="p">):</span>
                <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span class="s">&quot;When NUM_PMU &gt; 1 provide CHNAM as list of lists with NUM_PMU elements.&quot;</span><span
                                class="p">)</span>

            <span class="n">channel_name_list</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span
                                class="n">chnam</span> <span class="ow">in</span> <span class="nb">enumerate</span><span
                                class="p">(</span><span class="n">channel_names</span><span class="p">):</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-47'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-47'>#</a>
                    </div>
                    <p>Channel names must be list with PHNMR + ANNMR + 16*DGNMR elements. Each bit in one digital word
                        (16bit) has
                        it's own label.</p>
                </div>
                <div class='code'>
                    <div class="highlight"><pre>                <span class="k">if</span> <span class="p">(</span><span
                            class="bp">self</span><span class="o">.</span><span class="n">phasor_num</span><span
                            class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span
                            class="bp">self</span><span class="o">.</span><span class="n">analog_num</span><span
                            class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span
                            class="mi">16</span><span class="o">*</span><span class="bp">self</span><span
                            class="o">.</span><span class="n">digital_num</span><span class="p">[</span><span class="n">i</span><span
                            class="p">])</span> <span class="o">!=</span> <span class="nb">len</span><span
                            class="p">(</span><span class="n">chnam</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span
                                class="s">&#39;Provide CHNAM as list with PHNMR + ANNMR + 16*DGNMR elements for each stream.&#39;</span><span
                                class="p">)</span>
                <span class="n">channel_name_list</span><span class="o">.</span><span class="n">append</span><span
                                class="p">([</span><span class="n">chn</span><span class="p">[:</span><span class="mi">16</span><span
                                class="p">]</span><span class="o">.</span><span class="n">ljust</span><span
                                class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span
                                class="p">)</span> <span class="k">for</span> <span class="n">chn</span> <span
                                class="ow">in</span> <span class="n">chnam</span><span class="p">])</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">channel_names</span> <span
                                class="o">=</span> <span class="n">channel_name_list</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span
                                class="p">(</span><span class="n">channel_names</span><span class="p">,</span> <span
                                class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span
                                class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">phasor_num</span> <span
                                class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">analog_num</span> <span
                                class="o">+</span> <span class="mi">16</span><span class="o">*</span><span class="bp">self</span><span
                                class="o">.</span><span class="n">digital_num</span><span class="p">)</span> <span
                                class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">channel_names</span><span
                                class="p">):</span>
                <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span class="s">&quot;Provide CHNAM as list with PHNMR + ANNMR + 16*DGNMR elements.&quot;</span><span
                                class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">channel_names</span> <span
                                class="o">=</span> <span class="p">[</span><span class="n">channel</span><span
                                class="p">[:</span><span class="mi">16</span><span class="p">]</span><span
                                class="o">.</span><span class="n">ljust</span><span class="p">(</span><span class="mi">16</span><span
                                class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">)</span> <span
                                class="k">for</span> <span class="n">channel</span> <span class="ow">in</span> <span
                                class="n">channel_names</span><span class="p">]</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-48'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-48'>#</a>
                    </div>
                    <h3>set_phasor_units()</h3>
                    <p>Setter for phasor channels conversion factor.</p>
                    <p><strong>Params:</strong></p>
                    <ul>
                        <li><code>ph_units</code> <strong>(list)</strong> - Should be list of tuples <code>(scale,
                            phasor_type)</code>
                            where phasor type is <code>'i'</code> for current and <code>'v'</code> for voltage.
                            If <code>multistreaming</code> should be list of lists.
                        </li>
                    </ul>
                    <p><strong>Raises:</strong></p>
<pre><code>FrameError
</code></pre>
                    <p>When <code>ph_units</code> is not list of lists with length <code>num_pmu</code> when <code>multistreaming</code>.
                        When <code>ph_units</code> element is not tuple.</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>    <span class="k">def</span> <span class="nf">set_phasor_units</span><span
                                class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ph_units</span><span
                                class="p">):</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-49'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-49'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="k">if</span> <span class="bp">self</span><span
                            class="o">.</span><span class="n">multistreaming</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span
                                class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span
                                class="n">el</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span
                                class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span
                                class="n">ph_units</span><span class="p">)</span> <span class="ow">or</span> <span
                                class="bp">self</span><span class="o">.</span><span class="n">num_pmu</span> <span
                                class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">ph_units</span><span
                                class="p">):</span>
                <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span class="s">&quot;When NUM_PMU &gt; 1 provide PHUNIT as list of lists.&quot;</span><span
                                class="p">)</span>

            <span class="n">phunit_list</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span
                                class="n">ph_unit</span> <span class="ow">in</span> <span
                                class="nb">enumerate</span><span class="p">(</span><span class="n">ph_units</span><span
                                class="p">):</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span
                                class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span
                                class="n">el</span><span class="p">,</span> <span class="nb">tuple</span><span
                                class="p">)</span> <span class="k">for</span> <span class="n">el</span> <span
                                class="ow">in</span> <span class="n">ph_unit</span><span class="p">)</span> <span
                                class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span
                                class="n">phasor_num</span><span class="p">[</span><span class="n">i</span><span
                                class="p">]</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span
                                class="n">ph_unit</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span
                                class="s">&quot;Provide PHUNIT as list of tuples with PHNMR elements. Ex: [(1234,&#39;u&#39;),(1234, &#39;i&#39;)]&quot;</span><span
                                class="p">)</span>

                <span class="n">ph_values</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">ph_tuple</span> <span class="ow">in</span> <span class="n">ph_unit</span><span
                                class="p">:</span>
                    <span class="n">ph_values</span><span class="o">.</span><span class="n">append</span><span
                                class="p">(</span><span class="n">ConfigFrame2</span><span class="o">.</span><span
                                class="n">phunit2int</span><span class="p">(</span><span class="o">*</span><span
                                class="n">ph_tuple</span><span class="p">))</span>

                <span class="n">phunit_list</span><span class="o">.</span><span class="n">append</span><span
                                class="p">(</span><span class="n">ph_values</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">ph_units</span> <span class="o">=</span> <span
                                class="n">phunit_list</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span
                                class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span
                                class="n">el</span><span class="p">,</span><span class="nb">tuple</span><span class="p">)</span> <span
                                class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span
                                class="n">ph_units</span><span class="p">)</span> <span class="ow">or</span> <span
                                class="bp">self</span><span class="o">.</span><span class="n">phasor_num</span> <span
                                class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">ph_units</span><span
                                class="p">):</span>
                 <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span class="s">&quot;Provide PHUNIT as list of tuples with PHNMR elements. Ex: [(1234,&#39;u&#39;),(1234, &#39;i&#39;)]&quot;</span><span
                                class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">ph_units</span> <span class="o">=</span> <span
                                class="p">[</span><span class="n">ConfigFrame2</span><span class="o">.</span><span
                                class="n">phunit2int</span><span class="p">(</span><span class="o">*</span><span
                                class="n">phun</span><span class="p">)</span> <span class="k">for</span> <span
                                class="n">phun</span> <span class="ow">in</span> <span class="n">ph_units</span><span
                                class="p">]</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-50'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-50'>#</a>
                    </div>
                    <h3>phunit2int()</h3>
                    <p>Convert method for phasor channels conversion factor.</p>
                    <p>MSB: If phasor type is <code>v</code> then MSB will be <code>0</code>.
                        If phasor type is <code>i</code> then MSB will be <code>1</code>.</p>
                    <p>LSB: Unsigned 24 bit word in 10^-5 V or amperes per bit
                        to scale 16-bit integer data.</p>
                    <p>If transmitted data is in floating-point format, LSB 24 bit value
                        shall be ignored.</p>
                    <p><strong>Params:</strong></p>
                    <ul>
                        <li><code>scale</code> <strong>(int)</strong> - scale factor.</li>
                        <li><code>phasor_type</code> <strong>(char)</strong> - <code>v</code> - voltage, <code>i</code>
                            - current.
                            Default value: <code>v</code>.
                        </li>
                    </ul>
                    <p><strong>Returns:</strong></p>
                    <ul>
                        <li><code>int</code> which represents phasor channels conversion factor.</li>
                    </ul>
                    <p><strong>Raises:</strong></p>
<pre><code>FrameError
</code></pre>
                    <p>When <code>scale</code> is out of range.</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>    <span class="k">def</span> <span class="nf">phunit2int</span><span
                                class="p">(</span><span class="n">scale</span><span class="p">,</span> <span class="n">phasor_type</span><span
                                class="o">=</span><span class="s">&#39;v&#39;</span><span class="p">):</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-51'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-51'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="k">if</span> <span class="ow">not</span> <span
                            class="mi">0</span> <span class="o">&lt;=</span> <span class="n">scale</span> <span
                            class="o">&lt;=</span> <span class="mi">16777215</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;PHUNIT scale out of range. 0 &lt;= PHUNIT &lt;= 16777215.&quot;</span><span
                                class="p">)</span>

        <span class="k">if</span> <span class="n">phasor_type</span> <span class="o">==</span> <span class="s">&#39;i&#39;</span><span
                                class="p">:</span> <span class="c"># TODO: Check if valid phasor_type</span>
            <span class="n">phunit</span> <span class="o">=</span> <span class="mi">1</span> <span
                                class="o">&lt;&lt;</span> <span class="mi">24</span>
            <span class="k">return</span> <span class="n">phunit</span> <span class="o">|</span> <span
                                class="n">scale</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">scale</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-52'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-52'>#</a>
                    </div>
                    <h3>set_analog_units()</h3>
                    <p>Setter for analog channels conversion factor.</p>
                    <p><strong>Params:</strong></p>
                    <ul>
                        <li><code>an_units</code> <strong>(list)</strong> - Should be list of tuples <code>(scale,
                            analog_type)</code>
                            where analog type is <code>'pow'</code> for single point-on-wave, <code>'rms'</code> for RMS
                            of
                            analog input and <code>'peak</code> for peak of analog input.
                            If <code>multistreaming</code> should be list of lists.
                        </li>
                    </ul>
                    <p><strong>Raises:</strong></p>
<pre><code>FrameError
</code></pre>
                    <p>When <code>an_units</code> is not list of lists with length <code>num_pmu</code> when <code>multistreaming</code>.
                        When <code>an_units</code> element is not tuple.</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>    <span class="k">def</span> <span class="nf">set_analog_units</span><span
                                class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">an_units</span><span
                                class="p">):</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-53'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-53'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="k">if</span> <span class="bp">self</span><span
                            class="o">.</span><span class="n">multistreaming</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span
                                class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span
                                class="n">el</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span
                                class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span
                                class="n">an_units</span><span class="p">)</span> <span class="ow">or</span> <span
                                class="bp">self</span><span class="o">.</span><span class="n">num_pmu</span> <span
                                class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">an_units</span><span
                                class="p">):</span>
                <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span class="s">&quot;When NUM_PMU &gt; 1 provide ANUNIT as list of lists.&quot;</span><span
                                class="p">)</span>

            <span class="n">anunit_list</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span
                                class="n">an_unit</span> <span class="ow">in</span> <span
                                class="nb">enumerate</span><span class="p">(</span><span class="n">an_units</span><span
                                class="p">):</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span
                                class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span
                                class="n">el</span><span class="p">,</span> <span class="nb">tuple</span><span
                                class="p">)</span> <span class="k">for</span> <span class="n">el</span> <span
                                class="ow">in</span> <span class="n">an_unit</span><span class="p">)</span> <span
                                class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span
                                class="n">analog_num</span><span class="p">[</span><span class="n">i</span><span
                                class="p">]</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span
                                class="n">an_unit</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span
                                class="s">&quot;Provide ANUNIT as list of tuples with ANNMR elements. Ex: [(1234,&#39;pow&#39;),(1234, &#39;rms&#39;)]&quot;</span><span
                                class="p">)</span>

                <span class="n">an_values</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">an_tuple</span> <span class="ow">in</span> <span class="n">an_unit</span><span
                                class="p">:</span>
                    <span class="n">an_values</span><span class="o">.</span><span class="n">append</span><span
                                class="p">(</span><span class="n">ConfigFrame2</span><span class="o">.</span><span
                                class="n">anunit2int</span><span class="p">(</span><span class="o">*</span><span
                                class="n">an_tuple</span><span class="p">))</span>

                <span class="n">anunit_list</span><span class="o">.</span><span class="n">append</span><span
                                class="p">(</span><span class="n">an_values</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">an_units</span> <span class="o">=</span> <span
                                class="n">anunit_list</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span
                                class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span
                                class="n">el</span><span class="p">,</span><span class="nb">tuple</span><span class="p">)</span> <span
                                class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span
                                class="n">an_units</span><span class="p">)</span> <span class="ow">or</span> <span
                                class="bp">self</span><span class="o">.</span><span class="n">analog_num</span> <span
                                class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">an_units</span><span
                                class="p">):</span>
                 <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span class="s">&quot;Provide ANUNIT as list of tuples with ANNMR elements. Ex: [(1234,&#39;pow&#39;),(1234, &#39;rms&#39;)]&quot;</span><span
                                class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">an_units</span> <span class="o">=</span> <span
                                class="p">[</span><span class="n">ConfigFrame2</span><span class="o">.</span><span
                                class="n">anunit2int</span><span class="p">(</span><span class="o">*</span><span
                                class="n">anun</span><span class="p">)</span> <span class="k">for</span> <span
                                class="n">anun</span> <span class="ow">in</span> <span class="n">an_units</span><span
                                class="p">]</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-54'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-54'>#</a>
                    </div>
                    <h3>anunit2int()</h3>
                    <p>Convert method for analog channels conversion factor.</p>
                    <p>MSB: If analog type is <code>pow</code> then MSB will be <code>0</code>.
                        If analog type is <code>rms</code> then MSB will be <code>1</code> and
                        if analog type is <code>peak</code> then MSB will be <code>2</code>.</p>
                    <p>LSB: Signed 24 bit word for user defined scaling.</p>
                    <p><strong>Params:</strong></p>
                    <ul>
                        <li><code>scale</code> <strong>(int)</strong> - scale factor.</li>
                        <li><code>anunit_type</code> <strong>(char)</strong> - <code>pow</code> - single point on wave,
                            <code>rms</code> - RMS of analog input and <code>peak</code> - peak of analog input.
                            Also might be user defined. Default value: <code>pow</code>.
                        </li>
                    </ul>
                    <p><strong>Returns:</strong></p>
                    <ul>
                        <li><code>int</code> which represents analog channels conversion factor.</li>
                    </ul>
                    <p><strong>Raises:</strong></p>
<pre><code>FrameError
</code></pre>
                    <p>When <code>scale</code> is out of range.</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>    <span class="k">def</span> <span class="nf">anunit2int</span><span
                                class="p">(</span><span class="n">scale</span><span class="p">,</span> <span class="n">anunit_type</span><span
                                class="o">=</span><span class="s">&#39;pow&#39;</span><span class="p">):</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-55'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-55'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="k">if</span> <span class="ow">not</span> <span
                            class="o">-</span><span class="mi">8388608</span> <span class="o">&lt;=</span> <span
                            class="n">scale</span> <span class="o">&lt;=</span>  <span class="mi">8388608</span><span
                            class="p">:</span>
            <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span class="s">&quot;ANUNIT scale out of range. -8388608 &lt;= ANUNIT &lt;=  8388608.&quot;</span><span
                                class="p">)</span>

        <span class="n">anunit</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span
                                class="mi">24</span>

        <span class="k">if</span> <span class="n">anunit_type</span> <span class="o">==</span> <span class="s">&#39;pow&#39;</span><span
                                class="p">:</span> <span class="c"># TODO: User defined analog units</span>
            <span class="n">anunit</span> <span class="o">|=</span> <span class="n">scale</span>
            <span class="k">return</span> <span class="n">anunit</span> <span class="o">^</span> <span
                                class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span
                                class="mi">24</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">anunit_type</span> <span class="o">==</span> <span class="s">&#39;rms&#39;</span><span
                                class="p">:</span>
            <span class="n">anunit</span> <span class="o">|=</span> <span class="n">scale</span>
            <span class="k">return</span> <span class="n">anunit</span>

        <span class="k">if</span> <span class="n">anunit_type</span> <span class="o">==</span> <span class="s">&#39;peak&#39;</span><span
                                class="p">:</span>
            <span class="n">anunit</span> <span class="o">|=</span> <span class="n">scale</span>
            <span class="k">return</span> <span class="n">anunit</span> <span class="o">^</span> <span
                                class="p">(</span><span class="mi">3</span> <span class="o">&lt;&lt;</span> <span
                                class="mi">24</span><span class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-56'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-56'>#</a>
                    </div>
                    <h3>set_digital_units()</h3>
                    <p>Setter for mask words for digital status words.</p>
                    <p>Two 16 bit words are provided for each digital word.
                        The first will be used to indicate the normal status of the
                        digital inputs by returning 0 when XORed with the status word.</p>
                    <p>The second will indicate the current valid inputs to the PMU
                        by having a bit set in the binary position corresponding to the
                        digital input and all other bits set to 0.</p>
                    <p><strong>Params:</strong></p>
                    <ul>
                        <li><code>dig_units</code> <strong>(list)</strong> - Should be list of tuples <code>(first_mask,
                            second_mask)</code>.
                            If <code>multistreaming</code> should be list of lists.
                        </li>
                    </ul>
                    <p><strong>Raises:</strong></p>
<pre><code>FrameError
</code></pre>
                    <p>When <code>dig_units</code> is not list of lists with length <code>num_pmu</code> when <code>multistreaming</code>.
                        When <code>dig_units</code> element is not tuple.</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>    <span class="k">def</span> <span class="nf">set_digital_units</span><span
                                class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dig_units</span><span
                                class="p">):</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-57'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-57'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="k">if</span> <span class="bp">self</span><span
                            class="o">.</span><span class="n">multistreaming</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span
                                class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span
                                class="n">el</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span
                                class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span
                                class="n">dig_units</span><span class="p">)</span> <span class="ow">or</span> <span
                                class="bp">self</span><span class="o">.</span><span class="n">num_pmu</span> <span
                                class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">dig_units</span><span
                                class="p">):</span>
                <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span class="s">&quot;When NUM_PMU &gt; 1 provide DIGUNIT as list of lists.&quot;</span><span
                                class="p">)</span>

            <span class="n">digunit_list</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">dig_unit</span> <span
                                class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span
                                class="n">dig_units</span><span class="p">):</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span
                                class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span
                                class="n">el</span><span class="p">,</span> <span class="nb">tuple</span><span
                                class="p">)</span> <span class="k">for</span> <span class="n">el</span> <span
                                class="ow">in</span> <span class="n">dig_unit</span><span class="p">)</span> <span
                                class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span
                                class="n">digital_num</span><span class="p">[</span><span class="n">i</span><span
                                class="p">]</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span
                                class="n">dig_unit</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span
                                class="s">&quot;Provide DIGUNIT as list of tuples with DGNMR elements. Ex: [(0x0000,0xffff),(0x0011, 0xff0f)]&quot;</span><span
                                class="p">)</span>

                <span class="n">dig_values</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">dig_tuple</span> <span class="ow">in</span> <span class="n">dig_unit</span><span
                                class="p">:</span>
                    <span class="n">dig_values</span><span class="o">.</span><span class="n">append</span><span
                                class="p">(</span><span class="n">ConfigFrame2</span><span class="o">.</span><span
                                class="n">digunit2int</span><span class="p">(</span><span class="o">*</span><span
                                class="n">dig_tuple</span><span class="p">))</span>

                <span class="n">digunit_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span
                                class="n">dig_values</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">dig_units</span> <span
                                class="o">=</span> <span class="n">digunit_list</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span
                                class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span
                                class="n">el</span><span class="p">,</span><span class="nb">tuple</span><span class="p">)</span> <span
                                class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span
                                class="n">dig_units</span><span class="p">)</span> <span class="ow">or</span> <span
                                class="bp">self</span><span class="o">.</span><span class="n">digital_num</span> <span
                                class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">dig_units</span><span
                                class="p">):</span>
                 <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span class="s">&quot;Provide DIGUNIT as list of tuples with DGNMR elements. Ex: [(0x0000,0xffff),(0x0011, 0xff0f)]&quot;</span><span
                                class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">dig_units</span> <span
                                class="o">=</span> <span class="p">[</span><span class="n">ConfigFrame2</span><span
                                class="o">.</span><span class="n">digunit2int</span><span class="p">(</span><span
                                class="o">*</span><span class="n">dgun</span><span class="p">)</span> <span class="k">for</span> <span
                                class="n">dgun</span> <span class="ow">in</span> <span class="n">dig_units</span><span
                                class="p">]</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-58'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-58'>#</a>
                    </div>
                    <h3>digunit2int()</h3>
                    <p>Generate digital status word mask.</p>
                    <p><strong>Params:</strong></p>
                    <ul>
                        <li><code>first_mask</code> <strong>(int)</strong> - status indicator.</li>
                        <li><code>second_mask</code> <strong>(int)</strong> - valid input indicator.</li>
                    </ul>
                    <p><strong>Returns:</strong></p>
                    <ul>
                        <li><code>int</code> which digital status word mask.</li>
                    </ul>
                    <p><strong>Raises:</strong></p>
<pre><code>FrameError
</code></pre>
                    <p>When <code>first_mask</code> is out of range.
                        When <code>second_mask</code> is out of range.</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>    <span class="k">def</span> <span class="nf">digunit2int</span><span
                                class="p">(</span><span class="n">first_mask</span><span class="p">,</span> <span
                                class="n">second_mask</span><span class="p">):</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-59'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-59'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="k">if</span> <span class="ow">not</span> <span
                            class="mi">0</span> <span class="o">&lt;=</span> <span class="n">first_mask</span> <span
                            class="o">&lt;=</span>  <span class="mi">65535</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span class="s">&quot;DIGUNIT first mask must be 16-bit word. 0x0000 &lt;= first_mask &lt;= 0xffff&quot;</span><span
                                class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="mi">0</span> <span
                                class="o">&lt;=</span> <span class="n">first_mask</span> <span
                                class="o">&lt;=</span>  <span class="mi">65535</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span class="s">&quot;DIGUNIT second mask must be 16-bit word. 0x0000 &lt;= second_mask &lt;= 0xffff&quot;</span><span
                                class="p">)</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">first_mask</span> <span
                                class="o">&lt;&lt;</span> <span class="mi">16</span><span class="p">)</span> <span
                                class="o">|</span> <span class="n">second_mask</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-60'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-60'>#</a>
                    </div>
                    <h3>set_fnom()</h3>
                    <p>Setter for nominal line frequency.</p>
                    <p>Should be <code>50</code> or <code>60</code> Hz.</p>
                    <p><strong>Params:</strong></p>
                    <ul>
                        <li><code>f_nom</code> <strong>(int)</strong> - <code>50</code> or <code>60</code> Hz. If <code>multistreaming</code>
                            should be list of ints.
                        </li>
                    </ul>
                    <p><strong>Raises:</strong></p>
<pre><code>FrameError
</code></pre>
                    <p>When <code>f_nom</code> is not <code>50</code> or <code>60</code>.
                        When <code>f_nom</code> is not list of int with length <code>num_pmu</code> when
                        <code>multistreaming</code>.</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>    <span class="k">def</span> <span class="nf">set_fnom</span><span
                                class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f_nom</span><span
                                class="p">):</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-61'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-61'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="k">if</span> <span class="bp">self</span><span
                            class="o">.</span><span class="n">multistreaming</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span
                                class="p">(</span><span class="n">f_nom</span><span class="p">,</span> <span class="nb">list</span><span
                                class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span
                                class="o">.</span><span class="n">num_pmu</span> <span class="o">!=</span> <span
                                class="nb">len</span><span class="p">(</span><span class="n">f_nom</span><span
                                class="p">):</span>
                <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span class="s">&quot;When NUM_PMU &gt; 1 provide FNOM as list with NUM_PMU elements.&quot;</span><span
                                class="p">)</span>

            <span class="n">fnom_list</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">fnom</span> <span class="ow">in</span> <span
                                class="n">f_nom</span><span class="p">:</span>
                <span class="n">fnom_list</span><span class="o">.</span><span class="n">append</span><span
                                class="p">(</span><span class="n">ConfigFrame2</span><span class="o">.</span><span
                                class="n">fnom2int</span><span class="p">(</span><span class="n">fnom</span><span
                                class="p">))</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">f_nom</span> <span
                                class="o">=</span> <span class="n">fnom_list</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">f_nom</span> <span
                                class="o">=</span> <span class="n">ConfigFrame2</span><span class="o">.</span><span
                                class="n">fnom2int</span><span class="p">(</span><span class="n">f_nom</span><span
                                class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-62'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-62'>#</a>
                    </div>
                    <h3>fnom2int()</h3>
                    <p>Convert line frequency to code.</p>
                    <p>60 Hz = <code>0</code> and 50 Hz = <code>1</code>.</p>
                    <p><strong>Params:</strong></p>
                    <ul>
                        <li><code>fnom</code> <strong>(int)</strong> - Nominal line frequency. Default value: 60.</li>
                    </ul>
                    <p><strong>Returns:</strong></p>
                    <ul>
                        <li><code>int</code> [<code>0</code> or <code>1</code>]</li>
                    </ul>
                    <p><strong>Raises:</strong></p>
<pre><code>FrameError
</code></pre>
                    <p>When <code>fnom</code> is not 50 or 60.</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>    <span class="k">def</span> <span class="nf">fnom2int</span><span
                                class="p">(</span><span class="n">fnom</span><span class="o">=</span><span
                                class="mi">60</span><span class="p">):</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-63'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-63'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="k">if</span> <span class="n">fnom</span> <span
                            class="o">!=</span> <span class="mi">50</span> <span class="ow">and</span> <span class="n">fnom</span> <span
                            class="o">!=</span> <span class="mi">60</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span class="s">&quot;Fundamental frequency must be 50 or 60.&quot;</span><span
                                class="p">)</span>

        <span class="k">if</span> <span class="n">fnom</span> <span class="o">==</span> <span class="mi">50</span><span
                                class="p">:</span>
            <span class="k">return</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-64'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-64'>#</a>
                    </div>
                    <h3>set_cfg_count()</h3>
                    <p>Setter for configuration change count.</p>
                    <p>Factory default: <code>0</code>. This count will be the number of changes
                        of configuration of this message stream.</p>
                    <p><strong>Params:</strong></p>
                    <ul>
                        <li><code>cfg_count</code> <strong>(mixed)</strong> - Number of changes. Sholud be list of ints
                            if <code>multistreaming</code>.
                        </li>
                    </ul>
                    <p><strong>Raises:</strong></p>
<pre><code>FrameError.
</code></pre>
                    <p>When <code>cfg_count</code> is not list of ints with length <code>num_pmu</code> when
                        <code>multistreaming</code>.
                        When <code>cfg_count</code> is out of range.</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>    <span class="k">def</span> <span class="nf">set_cfg_count</span><span
                                class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cfg_count</span><span
                                class="p">):</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-65'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-65'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="k">if</span> <span class="bp">self</span><span
                            class="o">.</span><span class="n">multistreaming</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span
                                class="p">(</span><span class="n">cfg_count</span><span class="p">,</span> <span
                                class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span
                                class="bp">self</span><span class="o">.</span><span class="n">num_pmu</span> <span
                                class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">cfg_count</span><span
                                class="p">):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&quot;When NUM_PMU &gt; 1 provide CFGCNT as list with NUM_PMU elements.&quot;</span><span
                                class="p">)</span>

            <span class="n">cfgcnt_list</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">cfgcnt</span> <span class="ow">in</span> <span class="n">cfg_count</span><span
                                class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="mi">0</span> <span
                                class="o">&lt;=</span> <span class="n">cfgcnt</span> <span class="o">&lt;=</span> <span
                                class="mi">65535</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span
                                class="s">&quot;CFGCNT out of range. 0 &lt;= CFGCNT &lt;= 65535.&quot;</span><span
                                class="p">)</span>
                <span class="n">cfgcnt_list</span><span class="o">.</span><span class="n">append</span><span
                                class="p">(</span><span class="n">cfgcnt</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">cfg_count</span> <span
                                class="o">=</span> <span class="n">cfgcnt_list</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span
                                class="n">cfg_count</span> <span class="o">&lt;=</span> <span
                                class="mi">65535</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span
                                class="s">&quot;CFGCNT out of range. 0 &lt;= CFGCNT &lt;= 65535.&quot;</span><span
                                class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cfg_count</span> <span
                                class="o">=</span> <span class="n">cfg_count</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-66'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-66'>#</a>
                    </div>
                    <h3>set_data_rate()</h3>
                    <p>Setter for rate of phasor data transmission.</p>
                    <p>If <code>data_rate &gt; 0</code> rate is number of frames per second.
                        If <code>data_rate &lt; 0</code> rate is negative of seconds per frame.</p>
                    <p><strong>Params:</strong></p>
                    <ul>
                        <li><code>data_rate</code> <strong>(int)</strong> - Rate of phasor data transmission.</li>
                    </ul>
                    <p><strong>Raises:</strong></p>
<pre><code>FrameError.
</code></pre>
                    <p>When <code>data_rate</code> is out of range.</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>    <span class="k">def</span> <span class="nf">set_data_rate</span><span
                                class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_rate</span><span
                                class="p">):</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-67'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-67'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="k">if</span> <span class="ow">not</span> <span
                            class="o">-</span><span class="mi">32767</span> <span class="o">&lt;=</span> <span
                            class="n">data_rate</span> <span class="o">&lt;=</span> <span class="mi">32767</span><span
                            class="p">:</span>
                    <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span
                                class="s">&quot;DATA_RATE out of range. -32 767 &lt;= DATA_RATE &lt;= 32 767.&quot;</span><span
                                class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_rate</span> <span
                                class="o">=</span> <span class="n">data_rate</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-68'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-68'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>    <span class="k">def</span> <span
                            class="nf">convert2bytes</span><span class="p">(</span><span class="bp">self</span><span
                            class="p">):</span>


        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span
                                class="n">multistreaming</span><span class="p">:</span>

            <span class="n">cfg_b</span> <span class="o">=</span> <span class="bp">self</span><span
                                class="o">.</span><span class="n">time_base</span><span class="o">.</span><span
                                class="n">to_bytes</span><span class="p">(</span><span class="mi">4</span><span
                                class="p">,</span> <span class="s">&#39;big&#39;</span><span class="p">)</span> <span
                                class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_pmu</span><span
                                class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span
                                class="mi">2</span><span class="p">,</span> <span class="s">&#39;big&#39;</span><span
                                class="p">)</span> <span class="o">+</span> \
                        <span class="nb">str</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span
                                class="bp">self</span><span class="o">.</span><span class="n">station_name</span><span
                                class="p">)</span> <span class="o">+</span>  <span class="bp">self</span><span
                                class="o">.</span><span class="n">id_code</span><span class="o">.</span><span class="n">to_bytes</span><span
                                class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;big&#39;</span><span
                                class="p">)</span> <span class="o">+</span> \
                        <span class="bp">self</span><span class="o">.</span><span class="n">data_format</span><span
                                class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span
                                class="mi">2</span><span class="p">,</span> <span class="s">&#39;big&#39;</span><span
                                class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span
                                class="n">phasor_num</span><span class="o">.</span><span class="n">to_bytes</span><span
                                class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;big&#39;</span><span
                                class="p">)</span> <span class="o">+</span> \
                        <span class="bp">self</span><span class="o">.</span><span class="n">analog_num</span><span
                                class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span
                                class="mi">2</span><span class="p">,</span> <span class="s">&#39;big&#39;</span><span
                                class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span
                                class="n">digital_num</span><span class="o">.</span><span class="n">to_bytes</span><span
                                class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;big&#39;</span><span
                                class="p">)</span> <span class="o">+</span> \
                        <span class="nb">str</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span
                                class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span
                                class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">channel_names</span><span
                                class="p">))</span> <span class="o">+</span> <span class="n">list2bytes</span><span
                                class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ph_units</span><span
                                class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span
                                class="o">+</span> \
                        <span class="n">list2bytes</span><span class="p">(</span><span class="bp">self</span><span
                                class="o">.</span><span class="n">an_units</span><span class="p">,</span> <span
                                class="mi">4</span><span class="p">)</span> <span class="o">+</span> <span class="n">list2bytes</span><span
                                class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dig_units</span><span
                                class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span
                                class="o">+</span> \
                        <span class="bp">self</span><span class="o">.</span><span class="n">f_nom</span><span class="o">.</span><span
                                class="n">to_bytes</span><span class="p">(</span><span class="mi">2</span><span
                                class="p">,</span> <span class="s">&#39;big&#39;</span><span class="p">)</span> <span
                                class="o">+</span>  <span class="bp">self</span><span class="o">.</span><span class="n">cfg_count</span><span
                                class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span
                                class="mi">2</span><span class="p">,</span> <span class="s">&#39;big&#39;</span><span
                                class="p">)</span> <span class="o">+</span> \
                        <span class="bp">self</span><span class="o">.</span><span class="n">data_rate</span><span
                                class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span
                                class="mi">2</span><span class="p">,</span> <span class="s">&#39;big&#39;</span><span
                                class="p">)</span>
        <span class="k">else</span><span class="p">:</span>

            <span class="n">cfg_b</span> <span class="o">=</span> <span class="bp">self</span><span
                                class="o">.</span><span class="n">time_base</span><span class="o">.</span><span
                                class="n">to_bytes</span><span class="p">(</span><span class="mi">4</span><span
                                class="p">,</span> <span class="s">&#39;big&#39;</span><span class="p">)</span> <span
                                class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_pmu</span><span
                                class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span
                                class="mi">2</span><span class="p">,</span> <span class="s">&#39;big&#39;</span><span
                                class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-69'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-69'>#</a>
                    </div>
                    <p>Concatenate configurations as many as num_pmu tells</p>
                </div>
                <div class='code'>
                    <div class="highlight"><pre>            <span class="k">for</span> <span class="n">i</span> <span
                            class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span
                            class="o">.</span><span class="n">num_pmu</span><span class="p">):</span>

                <span class="n">cfg_b_i</span> <span class="o">=</span> <span class="nb">str</span><span
                                class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span
                                class="o">.</span><span class="n">station_name</span><span class="p">[</span><span
                                class="n">i</span><span class="p">])</span> <span class="o">+</span> <span class="bp">self</span><span
                                class="o">.</span><span class="n">id_code</span><span class="p">[</span><span class="n">i</span><span
                                class="p">]</span><span class="o">.</span><span class="n">to_bytes</span><span
                                class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;big&#39;</span><span
                                class="p">)</span> <span class="o">+</span> \
                          <span class="bp">self</span><span class="o">.</span><span class="n">data_format</span><span
                                class="p">[</span><span class="n">i</span><span class="p">]</span><span
                                class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span
                                class="mi">2</span><span class="p">,</span><span class="s">&#39;big&#39;</span><span
                                class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span
                                class="n">phasor_num</span><span class="p">[</span><span class="n">i</span><span
                                class="p">]</span><span class="o">.</span><span class="n">to_bytes</span><span
                                class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;big&#39;</span><span
                                class="p">)</span> <span class="o">+</span> \
                          <span class="bp">self</span><span class="o">.</span><span class="n">analog_num</span><span
                                class="p">[</span><span class="n">i</span><span class="p">]</span><span
                                class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span
                                class="mi">2</span><span class="p">,</span> <span class="s">&#39;big&#39;</span><span
                                class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span
                                class="n">digital_num</span><span class="p">[</span><span class="n">i</span><span
                                class="p">]</span><span class="o">.</span><span class="n">to_bytes</span><span
                                class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;big&#39;</span><span
                                class="p">)</span> <span class="o">+</span> \
                          <span class="nb">str</span><span class="o">.</span><span class="n">encode</span><span
                                class="p">(</span><span class="s">&#39;&#39;</span><span class="o">.</span><span
                                class="n">join</span><span class="p">(</span><span class="bp">self</span><span
                                class="o">.</span><span class="n">channel_names</span><span class="p">[</span><span
                                class="n">i</span><span class="p">]))</span> <span class="o">+</span> <span class="n">list2bytes</span><span
                                class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ph_units</span><span
                                class="p">[</span><span class="n">i</span><span class="p">],</span> <span
                                class="mi">4</span><span class="p">)</span> <span class="o">+</span>\
                          <span class="n">list2bytes</span><span class="p">(</span><span class="bp">self</span><span
                                class="o">.</span><span class="n">an_units</span><span class="p">[</span><span
                                class="n">i</span><span class="p">],</span> <span class="mi">4</span><span
                                class="p">)</span> <span class="o">+</span> <span class="n">list2bytes</span><span
                                class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dig_units</span><span
                                class="p">[</span><span class="n">i</span><span class="p">],</span> <span
                                class="mi">4</span><span class="p">)</span> <span class="o">+</span> \
                          <span class="bp">self</span><span class="o">.</span><span class="n">f_nom</span><span
                                class="p">[</span><span class="n">i</span><span class="p">]</span><span
                                class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span
                                class="mi">2</span><span class="p">,</span> <span class="s">&#39;big&#39;</span><span
                                class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span
                                class="n">cfg_count</span><span class="p">[</span><span class="n">i</span><span
                                class="p">]</span><span class="o">.</span><span class="n">to_bytes</span><span
                                class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;big&#39;</span><span
                                class="p">)</span>

                <span class="n">cfg_b</span> <span class="o">+=</span> <span class="n">cfg_b_i</span>

            <span class="n">cfg_b</span> <span class="o">+=</span> <span class="bp">self</span><span
                                class="o">.</span><span class="n">data_rate</span><span class="o">.</span><span
                                class="n">to_bytes</span><span class="p">(</span><span class="mi">2</span><span
                                class="p">,</span> <span class="s">&#39;big&#39;</span><span class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-70'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-70'>#</a>
                    </div>
                    <p>SYNC word in CommonFrame starting with AA hex word + frame type + version</p>
                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="n">sync_b</span> <span class="o">=</span> <span
                            class="p">(</span><span class="mh">0xaa</span> <span class="o">&lt;&lt;</span> <span
                            class="mi">8</span><span class="p">)</span> <span class="o">|</span> <span
                            class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frame_type</span> <span
                            class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span
                            class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">version</span><span
                            class="p">)</span>
        <span class="n">sync_b</span> <span class="o">=</span> <span class="n">sync_b</span><span
                                class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span
                                class="mi">2</span><span class="p">,</span> <span class="s">&#39;big&#39;</span><span
                                class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-71'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-71'>#</a>
                    </div>
                    <p>FRAMESIZE: 2B SYNC + 2B FRAMESIZE + 2B IDCODE + 4B SOC + 4B FRASEC + len(Configuration Message) +
                        2B CHK</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>        <span class="n">frame_size_b</span> <span class="o">=</span> <span
                                class="p">(</span><span class="mi">16</span> <span class="o">+</span> <span class="nb">len</span><span
                                class="p">(</span><span class="n">cfg_b</span><span class="p">))</span><span
                                class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span
                                class="mi">2</span><span class="p">,</span> <span class="s">&#39;big&#39;</span><span
                                class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-72'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-72'>#</a>
                    </div>
                    <p>PMU ID CODE</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>        <span class="n">pmu_id_code_b</span> <span class="o">=</span> <span
                                class="bp">self</span><span class="o">.</span><span class="n">pmu_id_code</span><span
                                class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span
                                class="mi">2</span><span class="p">,</span> <span class="s">&#39;big&#39;</span><span
                                class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-73'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-73'>#</a>
                    </div>
                    <p>SOC</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>        <span class="n">soc_b</span> <span class="o">=</span> <span
                                class="bp">self</span><span class="o">.</span><span class="n">soc</span><span class="o">.</span><span
                                class="n">to_bytes</span><span class="p">(</span><span class="mi">4</span><span
                                class="p">,</span> <span class="s">&#39;big&#39;</span><span class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-74'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-74'>#</a>
                    </div>
                    <p>FRASEC</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>        <span class="n">frasec_b</span> <span class="o">=</span> <span
                                class="bp">self</span><span class="o">.</span><span class="n">frasec</span><span
                                class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span
                                class="mi">4</span><span class="p">,</span> <span class="s">&#39;big&#39;</span><span
                                class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-75'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-75'>#</a>
                    </div>
                    <p>CHK</p>
                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="n">crc_chk_b</span> <span class="o">=</span> <span
                            class="n">crc16xmodem</span><span class="p">(</span><span class="n">sync_b</span> <span
                            class="o">+</span> <span class="n">frame_size_b</span> <span class="o">+</span> <span
                            class="n">pmu_id_code_b</span> <span class="o">+</span> <span class="n">soc_b</span> <span
                            class="o">+</span> <span class="n">frasec_b</span> <span class="o">+</span> <span class="n">cfg_b</span><span
                            class="p">,</span> <span class="mh">0xffff</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">sync_b</span> <span class="o">+</span> <span class="n">frame_size_b</span> <span
                                class="o">+</span> <span class="n">pmu_id_code_b</span> <span class="o">+</span> <span
                                class="n">soc_b</span> <span class="o">+</span> <span class="n">frasec_b</span> <span
                                class="o">+</span> <span class="n">cfg_b</span> <span class="o">+</span> <span
                                class="n">crc_chk_b</span><span class="o">.</span><span class="n">to_bytes</span><span
                                class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;big&#39;</span><span
                                class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-76'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-76'>#</a>
                    </div>
                    <h2>ConfigFrame3</h2>
                    <p>ConfigFrame3 is class which represents configuration frame v3.</p>
                    <p>Class implements two abstract methods from super class.</p>
                    <ul>
                        <li><code>convert2bytes()</code> - for converting ConfigFrame3 to bytes.</li>
                        <li><code>convert2frame()</code> - which converts array of bytes to ConfigFrame3.</li>
                    </ul>
                    <p>Each instance of ConfigFrame2 class will have following attributes.</p>
                    <p><strong>Attributes:</strong></p>
                    <ul>
                        <li><code>frame_type</code> <strong>(int)</strong> - Defines frame type. Inherited from <code>CommonFrame</code>.
                        </li>
                        <li><code>version</code> <strong>(int)</strong> - Standard version. Inherited from <code>CommonFrame</code>.
                            Default value: <code>1</code>.
                        </li>
                        <li><code>pmu_id_code</code> <strong>(int)</strong> - PMU Id code which identifies data stream.
                            Inherited from <code>CommonFrame</code>.
                        </li>
                        <li><code>soc</code> <strong>(int)</strong> - UNIX timestamp. Default value: <code>None</code>.
                            Inherited from <code>CommonFrame</code>.
                        </li>
                        <li><code>frasec</code> <strong>(int)</strong> - Fraction of second and Time Quality. Default
                            value: <code>None</code>.
                            Inherited from <code>CommonFrame</code>.
                        </li>
                        <li><code>time_base</code> <strong>(int)</strong> - Resolution of the fractional second time
                            stamp in all frames.
                        </li>
                        <li><code>num_pmu</code> <strong>(int)</strong> - Number of PMUs (data streams) included in
                            single <code>DataFrame</code>.
                        </li>
                        <li><code>multistreaming</code> <strong>(bool)</strong> - <code>True</code> if <code>num_pmu
                            &gt; 1</code>. That means data frame consist of multiple
                            measurement streams.
                        </li>
                        <li><code>station_name</code> <strong>(mixed)</strong> - Station name <code>(string)</code> or
                            station names <code>(list)</code> if <code>multistreaming</code>.
                        </li>
                        <li><code>id_code</code> <strong>(mixed)</strong> - Measurement stream ID code
                            <code>(int)</code> or <code>(list)</code> if <code>multistreaming</code>. Each ID
                            identifies source PMU of each data block.
                        </li>
                        <li><code>data_format</code> <strong>(mixed)</strong> - Data format for each data stream.
                            Inherited from <code>CommonFrame</code>.
                        </li>
                        <li><code>phasor_num</code> <strong>(mixed)</strong> - Number of phasors <code>(int)</code> or
                            <code>(list)</code> if <code>multistreaming</code>.
                        </li>
                        <li><code>analog_num</code> <strong>(mixed)</strong> - Number of analog values
                            <code>(int)</code> or <code>(list)</code> if <code>multistreaming</code>.
                        </li>
                        <li><code>digital_num</code> <strong>(mixed)</strong> - Number of digital status words <code>(int)</code>
                            or <code>(list)</code> if <code>multistreaming</code>.
                        </li>
                        <li><code>channel_names</code> <strong>(list)</strong> - List of phasor and channel names for
                            phasor, analog and digital channel.
                            If <code>multistreaming</code> it's list of lists.
                        </li>
                        <li><code>ph_units</code> <strong>(list)</strong> - Conversion factor for phasor channels. If
                            <code>multistreaming</code> list of lists.
                        </li>
                        <li><code>an_units</code> <strong>(list)</strong> - Conversion factor for analog channels. If
                            <code>multistreaming</code> list of lists.
                        </li>
                        <li><code>dig_units</code> <strong>(list)</strong> - Mask words for digital status word. If
                            <code>multistreaming</code> list of lists.
                        </li>
                        <li><code>fnom</code> <strong>(mixed)</strong> - Nominal frequency code and flags. If <code>multistreaming</code>
                            list of ints.
                        </li>
                        <li><code>cfg_count</code> <strong>(mixed)</strong> - Configuration change count. If <code>multistreaming</code>
                            list of ints.
                        </li>
                        <li><code>data_rate</code> <strong>(int)</strong> - Frames per second or seconds per frame (if
                            negative <code>int</code>).
                        </li>
                    </ul>
                    <p><strong>Raises:</strong></p>
<pre><code>FrameError
</code></pre>
                    <p>When it's not possible to create valid frame, usually due invalid parameter value.</p>
                </div>
                <div class='code'>
                    <div class="highlight"><pre>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">convert2frame</span><span class="p">(</span><span
                                class="n">byte_data</span><span class="p">):</span>
        <span class="k">pass</span>


<span class="k">class</span> <span class="nc">ConfigFrame3</span><span class="p">(</span><span
                                class="n">CommonFrame</span><span class="p">):</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-77'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-77'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>    <span class="k">pass</span> <span
                                class="c"># TODO: Implement Configuration Frame v3</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-78'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-78'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre><span class="k">class</span> <span class="nc">DataFrame</span><span
                            class="p">(</span><span class="n">CommonFrame</span><span class="p">):</span>

    <span class="n">MEASUREMENT_STATUS</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;ok&#39;</span><span
                                class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s">&#39;error&#39;</span><span
                                class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;test&#39;</span><span
                                class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;verror&#39;</span><span
                                class="p">:</span><span class="mi">3</span><span class="p">}</span>
    <span class="n">UNLOCKED_TIME</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;&lt;10&#39;</span><span
                                class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s">&#39;&lt;100&#39;</span><span
                                class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;&lt;1000&#39;</span><span
                                class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;&gt;1000&#39;</span><span
                                class="p">:</span><span class="mi">3</span><span class="p">}</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-79'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-79'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">__init__</span><span
                            class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pmu_id_code</span><span
                            class="p">,</span> <span class="n">stat</span><span class="p">,</span> <span class="n">phasors</span><span
                            class="p">,</span> <span class="n">freq</span><span class="p">,</span> <span
                            class="n">dfreq</span><span class="p">,</span> <span class="n">analog</span><span class="p">,</span> <span
                            class="n">digital</span><span class="p">,</span> <span class="n">data_format</span><span
                            class="p">,</span> <span class="n">num_measurements</span><span class="o">=</span><span
                            class="mi">1</span><span class="p">,</span>
                 <span class="n">soc</span> <span class="o">=</span> <span class="bp">None</span><span
                                class="p">,</span> <span class="n">frasec</span> <span class="o">=</span> <span
                                class="bp">None</span><span class="p">):</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-80'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-80'>#</a>
                    </div>
                    <p>Common frame for Configuration frame 2 with PMU simulator ID CODE which sends configuration
                        frame.</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span
                                class="n">__init__</span><span class="p">(</span><span
                                class="s">&#39;data&#39;</span><span class="p">,</span> <span
                                class="n">pmu_id_code</span><span class="p">,</span> <span class="n">soc</span><span
                                class="p">,</span> <span class="n">frasec</span><span class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-81'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-81'>#</a>
                    </div>
                    <p>TODO: ValueError for this</p>
                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span
                            class="n">num_measurements</span> <span class="o">=</span> <span
                            class="n">num_measurements</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_data_format</span><span
                                class="p">(</span><span class="n">data_format</span><span class="p">,</span> <span
                                class="n">num_measurements</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_stat</span><span class="p">(</span><span
                                class="n">stat</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_phasors</span><span
                                class="p">(</span><span class="n">phasors</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_freq</span><span class="p">(</span><span
                                class="n">freq</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_dfreq</span><span
                                class="p">(</span><span class="n">dfreq</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_analog</span><span
                                class="p">(</span><span class="n">analog</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_digital</span><span
                                class="p">(</span><span class="n">digital</span><span class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-82'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-82'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">set_stat</span><span
                            class="p">(</span><span class="bp">self</span><span class="p">,</span> <span
                            class="n">stat</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span
                                class="n">num_measurements</span> <span class="o">&gt;</span> <span
                                class="mi">1</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span
                                class="p">(</span><span class="n">stat</span><span class="p">,</span> <span class="nb">list</span><span
                                class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span
                                class="o">.</span><span class="n">num_measurements</span><span class="o">!=</span> <span
                                class="nb">len</span><span class="p">(</span><span class="n">stat</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&quot;When number of measurements &gt; 1 provide STAT as list with NUM_MEASUREMENTS elements.&quot;</span><span
                                class="p">)</span>

            <span class="n">stats</span> <span class="o">=</span> <span class="p">[]</span> <span class="c">#Format tuples transformed to ints</span>
            <span class="k">for</span> <span class="n">stat_el</span> <span class="ow">in</span> <span
                                class="n">stat</span><span class="p">:</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-83'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-83'>#</a>
                    </div>
                    <p>If stat is specified as tuple then convert them to int</p>
                </div>
                <div class='code'>
                    <div class="highlight"><pre>                <span class="k">if</span> <span
                            class="nb">isinstance</span><span class="p">(</span><span class="n">stat_el</span><span
                            class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
                    <span class="n">stats</span><span class="o">.</span><span class="n">append</span><span
                                class="p">(</span><span class="n">DataFrame</span><span class="o">.</span><span
                                class="n">stat2int</span><span class="p">(</span><span class="o">*</span><span
                                class="n">stat_el</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-84'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-84'>#</a>
                    </div>
                    <p>If data formats are specified as ints check range</p>
                </div>
                <div class='code'>
                    <div class="highlight"><pre>                    <span class="k">if</span> <span
                            class="ow">not</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span
                            class="n">stat_el</span> <span class="o">&lt;=</span> <span class="mi">65536</span><span
                            class="p">:</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span
                                class="s">&quot;STAT out of range. 0 &lt;= STAT &lt;= 65536&quot;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">stats</span><span class="o">.</span><span class="n">append</span><span
                                class="p">(</span><span class="n">stat_el</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">stat</span> <span class="o">=</span> <span
                                class="n">stats</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span
                                class="n">stat</span><span class="p">,</span> <span class="nb">tuple</span><span
                                class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">stat</span> <span class="o">=</span> <span
                                class="n">DataFrame</span><span class="o">.</span><span class="n">stat2int</span><span
                                class="p">(</span><span class="o">*</span><span class="n">stat</span><span
                                class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="mi">0</span> <span
                                class="o">&lt;=</span> <span class="n">stat</span> <span class="o">&lt;=</span> <span
                                class="mi">65536</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span
                                class="s">&quot;STAT out of range. 0 &lt;= STAT &lt;= 65536&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">stat</span> <span
                                class="o">=</span> <span class="n">stat</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-85'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-85'>#</a>
                    </div>
                    <p>STAT: TODO: Document Table 7. and unlocked time</p>
                </div>
                <div class='code'>
                    <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">stat2int</span><span
                            class="p">(</span><span class="n">measurement_status</span><span class="o">=</span><span
                            class="s">&#39;ok&#39;</span><span class="p">,</span> <span class="n">sync</span> <span
                            class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">sorting</span><span
                            class="o">=</span><span class="s">&#39;timestamp&#39;</span><span class="p">,</span> <span
                            class="n">trigger</span><span class="o">=</span><span class="bp">False</span><span
                            class="p">,</span> <span class="n">cfg_change</span><span class="o">=</span><span
                            class="bp">False</span><span class="p">,</span>
                 <span class="n">modified</span><span class="o">=</span><span class="bp">False</span><span
                                class="p">,</span> <span class="n">time_quality</span><span class="o">=</span><span
                                class="mi">5</span><span class="p">,</span> <span class="n">unlocked</span><span
                                class="o">=</span><span class="s">&#39;&lt;10&#39;</span><span class="p">,</span> <span
                                class="n">trigger_reason</span><span class="o">=</span><span class="mi">0</span><span
                                class="p">):</span>

        <span class="n">stat</span> <span class="o">=</span> <span class="n">DataFrame</span><span
                                class="o">.</span><span class="n">MEASUREMENT_STATUS</span><span class="p">[</span><span
                                class="n">measurement_status</span><span class="p">]</span> <span
                                class="o">&lt;&lt;</span> <span class="mi">2</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">sync</span><span class="p">:</span>
            <span class="n">stat</span> <span class="o">|=</span> <span class="mi">1</span>

        <span class="n">stat</span> <span class="o">&lt;&lt;=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">sorting</span> <span
                                class="o">==</span> <span class="s">&#39;timestamp&#39;</span><span class="p">:</span>
            <span class="n">stat</span> <span class="o">|=</span> <span class="mi">1</span>

        <span class="n">stat</span> <span class="o">&lt;&lt;=</span> <span class="mi">1</span>

        <span class="k">if</span> <span class="n">trigger</span><span class="p">:</span>
            <span class="n">stat</span> <span class="o">|=</span> <span class="mi">1</span>
        <span class="n">stat</span> <span class="o">&lt;&lt;=</span> <span class="mi">1</span>

        <span class="k">if</span> <span class="n">cfg_change</span><span class="p">:</span>
            <span class="n">stat</span> <span class="o">|=</span> <span class="mi">1</span>

        <span class="n">stat</span> <span class="o">&lt;&lt;=</span> <span class="mi">1</span>

        <span class="k">if</span> <span class="n">modified</span><span class="p">:</span>
            <span class="n">stat</span> <span class="o">|=</span> <span class="mi">1</span>

        <span class="n">stat</span> <span class="o">&lt;&lt;=</span> <span class="mi">3</span>
        <span class="n">stat</span> <span class="o">|=</span> <span class="n">time_quality</span>
        <span class="n">stat</span> <span class="o">&lt;&lt;=</span> <span class="mi">2</span>

        <span class="n">stat</span> <span class="o">|=</span> <span class="n">DataFrame</span><span
                                class="o">.</span><span class="n">UNLOCKED_TIME</span><span class="p">[</span><span
                                class="n">unlocked</span><span class="p">]</span>
        <span class="n">stat</span> <span class="o">&lt;&lt;=</span> <span class="mi">4</span>

        <span class="k">return</span> <span class="n">stat</span> <span class="o">|</span> <span class="n">trigger_reason</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-86'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-86'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">set_phasors</span><span
                            class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">phasors</span><span
                            class="p">):</span>

        <span class="n">phasors_list</span> <span class="o">=</span> <span class="p">[]</span> <span class="c">#Format tuples transformed to ints</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span
                                class="n">num_measurements</span> <span class="o">&gt;</span> <span
                                class="mi">1</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span
                                class="p">(</span><span class="n">phasors</span><span class="p">,</span> <span
                                class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span
                                class="bp">self</span><span class="o">.</span><span
                                class="n">num_measurements</span> <span class="o">!=</span> <span
                                class="nb">len</span><span class="p">(</span><span class="n">phasors</span><span
                                class="p">):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&quot;When number of measurements &gt; 1 provide PHASORS as list of tuple list with &quot;</span>
                                <span class="s">&quot;NUM_MEASUREMENTS elements.&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span
                                class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_format</span><span
                                class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span
                                class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span
                                class="n">num_measurements</span> <span class="o">!=</span> <span
                                class="nb">len</span><span class="p">(</span><span class="bp">self</span><span
                                class="o">.</span><span class="n">data_format</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&quot;When number of measurements &gt; 1 provide DATA_FORMAT as list with &quot;</span>
                                <span class="s">&quot;NUM_MEASUREMENTS elements.&quot;</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span
                                class="n">phasor</span> <span class="ow">in</span> <span
                                class="nb">enumerate</span><span class="p">(</span><span class="n">phasors</span><span
                                class="p">):</span>
                <span class="n">ph_measurements</span> <span class="o">=</span> <span class="p">[]</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-87'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-87'>#</a>
                    </div>
                    <p>TODO: Add phasor_num to check length of phasor list</p>
                </div>
                <div class='code'>
                    <div class="highlight"><pre>                <span class="k">for</span> <span class="n">phasor_measurement</span> <span
                            class="ow">in</span> <span class="n">phasor</span><span class="p">:</span>
                    <span class="n">ph_measurements</span><span class="o">.</span><span class="n">append</span><span
                                class="p">(</span><span class="n">DataFrame</span><span class="o">.</span><span
                                class="n">phasor2int</span><span class="p">(</span><span
                                class="n">phasor_measurement</span><span class="p">,</span> <span class="bp">self</span><span
                                class="o">.</span><span class="n">data_format</span><span class="p">[</span><span
                                class="n">i</span><span class="p">]))</span>

                <span class="n">phasors_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span
                                class="n">ph_measurements</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">phasor_measurement</span> <span class="ow">in</span> <span
                                class="n">phasors</span><span class="p">:</span>
                <span class="n">phasors_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span
                                class="n">DataFrame</span><span class="o">.</span><span class="n">phasor2int</span><span
                                class="p">(</span><span class="n">phasor_measurement</span><span
                                class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_format</span><span
                                class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">phasors</span> <span
                                class="o">=</span> <span class="n">phasors_list</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-88'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-88'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">phasor2int</span><span
                            class="p">(</span><span class="n">phasor</span><span class="p">,</span> <span class="n">data_format</span><span
                            class="p">):</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span
                                class="n">phasor</span><span class="p">,</span> <span class="nb">tuple</span><span
                                class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&quot;Provide phasor measurement as tuple. Rectangular - (Re, Im); Polar - (Mg, An).&quot;</span><span
                                class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-89'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-89'>#</a>
                    </div>
                    <p>Check if first bit in data_format is 1 -&gt; polar representation else rectangular</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>        <span class="k">if</span> <span class="p">((</span><span
                                class="n">data_format</span> <span class="o">&amp;</span> <span class="mi">1</span><span
                                class="p">)</span> <span class="o">!=</span><span class="mi">0</span><span
                                class="p">):</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-90'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-90'>#</a>
                    </div>
                    <p>Check if second bit in data_format is 1 -&gt; floating point representation</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>            <span class="k">if</span> <span class="p">((</span><span
                                class="n">data_format</span> <span class="o">&amp;</span> <span class="mi">2</span><span
                                class="p">)</span> <span class="o">!=</span><span class="mi">0</span><span
                                class="p">):</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-91'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-91'>#</a>
                    </div>
                    <p>Polar floating point representation
                        Angle in radians must be between -3.14 to +3.14</p>
                </div>
                <div class='code'>
                    <div class="highlight"><pre>                <span class="k">if</span> <span
                            class="ow">not</span> <span class="o">-</span><span class="mf">3.15</span> <span class="o">&lt;</span> <span
                            class="n">phasor</span><span class="p">[</span><span class="mi">1</span><span
                            class="p">]</span> <span class="o">&lt;</span> <span class="mf">3.15</span><span
                            class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span
                                class="s">&quot;Angle in radians must be between -3.14 and +3.14.&quot;</span><span
                                class="p">)</span>

                <span class="n">ph</span> <span class="o">=</span> <span class="p">(</span><span class="nb">float</span><span
                                class="p">(</span><span class="n">phasor</span><span class="p">[</span><span class="mi">0</span><span
                                class="p">])</span> <span class="o">&lt;&lt;</span> <span class="mi">32</span><span
                                class="p">)</span> <span class="o">|</span> <span class="nb">float</span><span
                                class="p">(</span><span class="n">phasor</span><span class="p">[</span><span class="mi">1</span><span
                                class="p">])</span>
                <span class="k">return</span> <span class="n">unpack</span><span class="p">(</span><span class="s">&#39;I&#39;</span><span
                                class="p">,</span> <span class="n">pack</span><span class="p">(</span><span class="s">&#39;f&#39;</span><span
                                class="p">,</span> <span class="n">ph</span><span class="p">))[</span><span
                                class="mi">0</span><span class="p">]</span>

            <span class="k">else</span><span class="p">:</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-92'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-92'>#</a>
                    </div>
                    <p>Polar 16-bit representations</p>
                </div>
                <div class='code'>
                    <div class="highlight"><pre>                <span class="k">if</span> <span
                            class="ow">not</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span
                            class="n">phasor</span><span class="p">[</span><span class="mi">0</span><span
                            class="p">]</span> <span class="o">&lt;=</span> <span class="mi">65535</span><span
                            class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span
                                class="s">&quot;Magnitude must be 16-bit unsigned integer. 0 &lt;= MAGNITUDE &lt;= 65535.&quot;</span><span
                                class="p">)</span>

                <span class="k">if</span> <span class="ow">not</span> <span class="o">-</span><span
                                class="mi">31416</span> <span class="o">&lt;=</span> <span class="n">phasor</span><span
                                class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span
                                class="mi">31416</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span
                                class="s">&quot;Angle must be 16-bit signed integer in radians x (10^-4). &quot;</span>
                                     <span class="s">&quot;-31416 &lt;= ANGLE &lt;= 31416.&quot;</span><span
                                class="p">)</span>

                <span class="k">return</span> <span class="p">(</span><span class="n">phasor</span><span
                                class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span
                                class="mi">16</span><span class="p">)</span> <span class="o">|</span> <span class="n">phasor</span><span
                                class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">else</span><span class="p">:</span>

            <span class="k">if</span> <span class="p">((</span><span class="n">data_format</span> <span
                                class="o">&amp;</span> <span class="mi">2</span><span class="p">)</span> <span
                                class="o">!=</span><span class="mi">0</span><span class="p">):</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-93'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-93'>#</a>
                    </div>
                    <p>Rectangular floating point representation</p>
                </div>
                <div class='code'>
                    <div class="highlight"><pre>                <span class="n">ph</span> <span class="o">=</span> <span
                            class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">phasor</span><span
                            class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&lt;&lt;</span> <span
                            class="mi">32</span><span class="p">)</span> <span class="o">|</span> <span
                            class="nb">float</span><span class="p">(</span><span class="n">phasor</span><span class="p">[</span><span
                            class="mi">1</span><span class="p">])</span>
                <span class="k">return</span> <span class="n">unpack</span><span class="p">(</span><span class="s">&#39;I&#39;</span><span
                                class="p">,</span> <span class="n">pack</span><span class="p">(</span><span class="s">&#39;f&#39;</span><span
                                class="p">,</span> <span class="n">ph</span><span class="p">))[</span><span
                                class="mi">0</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>

                <span class="k">if</span> <span class="ow">not</span> <span class="p">((</span><span
                                class="o">-</span><span class="mi">65535</span> <span class="o">&lt;=</span> <span
                                class="n">phasor</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span
                                class="o">&lt;=</span> <span class="mi">65535</span><span class="p">)</span> <span
                                class="ow">or</span> <span class="p">(</span><span class="o">-</span><span class="mi">65535</span> <span
                                class="o">&lt;=</span> <span class="n">phasor</span><span class="p">[</span><span
                                class="mi">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span
                                class="mi">65535</span><span class="p">)):</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span
                                class="s">&quot;Real and imaginary value must be 16-bit signed integers. &quot;</span>
                                     <span class="s">&quot;-31767 &lt;= (Re,Im) &lt;= 31767.&quot;</span><span
                                class="p">)</span>

                <span class="k">return</span> <span class="p">(</span><span class="n">phasor</span><span
                                class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span
                                class="mi">16</span><span class="p">)</span> <span class="o">|</span> <span class="n">phasor</span><span
                                class="p">[</span><span class="mi">1</span><span class="p">]</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-94'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-94'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">set_freq</span><span
                            class="p">(</span><span class="bp">self</span><span class="p">,</span> <span
                            class="n">freq</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span
                                class="n">num_measurements</span> <span class="o">&gt;</span> <span
                                class="mi">1</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span
                                class="p">(</span><span class="n">freq</span><span class="p">,</span> <span class="nb">list</span><span
                                class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span
                                class="o">.</span><span class="n">num_measurements</span> <span
                                class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">freq</span><span
                                class="p">):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&quot;When number of measurements &gt; 1 provide FREQ as list with &quot;</span>
                                <span class="s">&quot;NUM_MEASUREMENTS elements.&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span
                                class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_format</span><span
                                class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span
                                class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span
                                class="n">num_measurements</span> <span class="o">!=</span> <span
                                class="nb">len</span><span class="p">(</span><span class="bp">self</span><span
                                class="o">.</span><span class="n">data_format</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&quot;When number of measurements &gt; 1 provide DATA_FORMAT as list with &quot;</span>
                                <span class="s">&quot;NUM_MEASUREMENTS elements.&quot;</span><span class="p">)</span>

            <span class="n">freq_list</span> <span class="o">=</span> <span class="p">[]</span> <span class="c">#Format tuples transformed to ints</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">fr</span> <span
                                class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span
                                class="n">freq</span><span class="p">):</span>
                <span class="n">freq_list</span><span class="o">.</span><span class="n">append</span><span
                                class="p">(</span><span class="n">DataFrame</span><span class="o">.</span><span
                                class="n">freq2int</span><span class="p">(</span><span class="n">fr</span><span
                                class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_format</span><span
                                class="p">[</span><span class="n">i</span><span class="p">]))</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">freq</span> <span
                                class="o">=</span> <span class="n">freq_list</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">freq</span> <span
                                class="o">=</span> <span class="n">DataFrame</span><span class="o">.</span><span
                                class="n">freq2int</span><span class="p">(</span><span class="n">freq</span><span
                                class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_format</span><span
                                class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-95'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-95'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>    <span class="k">def</span> <span class="nf">freq2int</span><span
                                class="p">(</span><span class="n">freq</span><span class="p">,</span> <span class="n">data_format</span><span
                                class="p">):</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-96'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-96'>#</a>
                    </div>
                    <p>Check if third bit in data_format is 1 -&gt; floating point representation</p>
                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="k">if</span> <span class="p">((</span><span
                            class="n">data_format</span> <span class="o">&amp;</span> <span class="mi">8</span><span
                            class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span
                            class="p">):</span>
            <span class="k">return</span> <span class="n">unpack</span><span class="p">(</span><span class="s">&#39;I&#39;</span><span
                                class="p">,</span> <span class="n">pack</span><span class="p">(</span><span class="s">&#39;f&#39;</span><span
                                class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="n">freq</span><span
                                class="p">)))[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="o">-</span><span class="mi">32767</span> <span
                                class="o">&lt;=</span> <span class="n">freq</span> <span class="o">&lt;=</span> <span
                                class="mi">32767</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;FREQ must be 16-bit signed integer. -32767 &lt;= FREQ &lt;= 32767.&quot;</span><span
                                class="p">)</span>
            <span class="k">return</span>  <span class="n">freq</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-97'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-97'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">set_dfreq</span><span
                            class="p">(</span><span class="bp">self</span><span class="p">,</span> <span
                            class="n">dfreq</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span
                                class="n">num_measurements</span> <span class="o">&gt;</span> <span
                                class="mi">1</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span
                                class="p">(</span><span class="n">dfreq</span><span class="p">,</span> <span class="nb">list</span><span
                                class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span
                                class="o">.</span><span class="n">num_measurements</span> <span
                                class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">dfreq</span><span
                                class="p">):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&quot;When number of measurements &gt; 1 provide DFREQ as list with &quot;</span>
                                <span class="s">&quot;NUM_MEASUREMENTS elements.&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span
                                class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_format</span><span
                                class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span
                                class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span
                                class="n">num_measurements</span> <span class="o">!=</span> <span
                                class="nb">len</span><span class="p">(</span><span class="bp">self</span><span
                                class="o">.</span><span class="n">data_format</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&quot;When number of measurements &gt; 1 provide DATA_FORMAT as list with &quot;</span>
                                <span class="s">&quot;NUM_MEASUREMENTS elements.&quot;</span><span class="p">)</span>

            <span class="n">dfreq_list</span> <span class="o">=</span> <span class="p">[]</span> <span class="c">#Format tuples transformed to ints</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">dfr</span> <span
                                class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span
                                class="n">dfreq</span><span class="p">):</span>
                <span class="n">dfreq_list</span><span class="o">.</span><span class="n">append</span><span
                                class="p">(</span><span class="n">DataFrame</span><span class="o">.</span><span
                                class="n">dfreq2int</span><span class="p">(</span><span class="n">dfr</span><span
                                class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_format</span><span
                                class="p">[</span><span class="n">i</span><span class="p">]))</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">dfreq</span> <span
                                class="o">=</span> <span class="n">dfreq_list</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dfreq</span> <span
                                class="o">=</span> <span class="n">DataFrame</span><span class="o">.</span><span
                                class="n">dfreq2int</span><span class="p">(</span><span class="n">dfreq</span><span
                                class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_format</span><span
                                class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-98'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-98'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>    <span class="k">def</span> <span class="nf">dfreq2int</span><span
                                class="p">(</span><span class="n">dfreq</span><span class="p">,</span> <span class="n">data_format</span><span
                                class="p">):</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-99'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-99'>#</a>
                    </div>
                    <p>Check if third bit in data_format is 1 -&gt; floating point representation</p>
                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="k">if</span> <span class="p">((</span><span
                            class="n">data_format</span> <span class="o">&amp;</span> <span class="mi">8</span><span
                            class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span
                            class="p">):</span>
            <span class="k">return</span> <span class="n">unpack</span><span class="p">(</span><span class="s">&#39;I&#39;</span><span
                                class="p">,</span> <span class="n">pack</span><span class="p">(</span><span class="s">&#39;f&#39;</span><span
                                class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="n">dfreq</span><span
                                class="p">)))[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="o">-</span><span class="mi">32767</span> <span
                                class="o">&lt;=</span> <span class="n">dfreq</span> <span class="o">&lt;=</span> <span
                                class="mi">32767</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;DFREQ must be 16-bit signed integer. -32767 &lt;= FREQ &lt;= 32767.&quot;</span><span
                                class="p">)</span>
            <span class="k">return</span>  <span class="n">dfreq</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-100'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-100'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">set_analog</span><span
                            class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">analog</span><span
                            class="p">):</span>

        <span class="n">analog_list</span> <span class="o">=</span> <span class="p">[]</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-101'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-101'>#</a>
                    </div>
                    <p>Format tuples transformed to ints</p>
                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="k">if</span> <span class="bp">self</span><span
                            class="o">.</span><span class="n">num_measurements</span> <span class="o">&gt;</span> <span
                            class="mi">1</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span
                                class="p">(</span><span class="n">analog</span><span class="p">,</span> <span
                                class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span
                                class="bp">self</span><span class="o">.</span><span
                                class="n">num_measurements</span> <span class="o">!=</span> <span
                                class="nb">len</span><span class="p">(</span><span class="n">analog</span><span
                                class="p">):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&quot;When number of measurements &gt; 1 provide ANALOG as list of list with &quot;</span>
                                <span class="s">&quot;NUM_MEASUREMENTS elements.&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span
                                class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_format</span><span
                                class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span
                                class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span
                                class="n">num_measurements</span> <span class="o">!=</span> <span
                                class="nb">len</span><span class="p">(</span><span class="bp">self</span><span
                                class="o">.</span><span class="n">data_format</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&quot;When number of measurements &gt; 1 provide DATA_FORMAT as list with &quot;</span>
                                <span class="s">&quot;NUM_MEASUREMENTS elements.&quot;</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">an</span> <span
                                class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span
                                class="n">analog</span><span class="p">):</span>
                <span class="n">an_measurements</span> <span class="o">=</span> <span class="p">[]</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-102'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-102'>#</a>
                    </div>
                    <p>TODO: Add analog_num to check length of analog list</p>
                </div>
                <div class='code'>
                    <div class="highlight"><pre>                <span class="k">for</span> <span class="n">analog_measurement</span> <span
                            class="ow">in</span> <span class="n">an</span><span class="p">:</span>
                    <span class="n">an_measurements</span><span class="o">.</span><span class="n">append</span><span
                                class="p">(</span><span class="n">DataFrame</span><span class="o">.</span><span
                                class="n">analog2int</span><span class="p">(</span><span
                                class="n">analog_measurement</span><span class="p">,</span> <span class="bp">self</span><span
                                class="o">.</span><span class="n">data_format</span><span class="p">[</span><span
                                class="n">i</span><span class="p">]))</span>

                <span class="n">analog_list</span><span class="o">.</span><span class="n">append</span><span
                                class="p">(</span><span class="n">an_measurements</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">analog_measurement</span> <span class="ow">in</span> <span
                                class="n">analog</span><span class="p">:</span>
                <span class="n">analog_list</span><span class="o">.</span><span class="n">append</span><span
                                class="p">(</span><span class="n">DataFrame</span><span class="o">.</span><span
                                class="n">analog2int</span><span class="p">(</span><span
                                class="n">analog_measurement</span><span class="p">,</span> <span class="bp">self</span><span
                                class="o">.</span><span class="n">data_format</span><span class="p">))</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">analog</span> <span class="o">=</span> <span
                                class="n">analog_list</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-103'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-103'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>    <span class="k">def</span> <span class="nf">analog2int</span><span
                                class="p">(</span><span class="n">analog</span><span class="p">,</span> <span class="n">data_format</span><span
                                class="p">):</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-104'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-104'>#</a>
                    </div>
                    <p>Check if third bit in data_format is 1 -&gt; floating point representation</p>
                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="k">if</span> <span class="p">((</span><span
                            class="n">data_format</span> <span class="o">&amp;</span> <span class="mi">4</span><span
                            class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span
                            class="p">):</span>

            <span class="k">return</span> <span class="n">unpack</span><span class="p">(</span><span class="s">&#39;I&#39;</span><span
                                class="p">,</span> <span class="n">pack</span><span class="p">(</span><span class="s">&#39;f&#39;</span><span
                                class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="n">analog</span><span
                                class="p">)))[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-105'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-105'>#</a>
                    </div>
                    <p>User defined ranges - but fit in 16-bit (u)signed integer</p>
                </div>
                <div class='code'>
                    <div class="highlight"><pre>            <span class="k">if</span> <span class="ow">not</span> <span
                            class="o">-</span><span class="mi">32767</span> <span class="o">&lt;=</span> <span
                            class="n">analog</span> <span class="o">&lt;=</span> <span class="mi">65535</span><span
                            class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;ANALOG must be 16-bit (u)signed integer. -32767 &lt;= FREQ &lt;= 65535.&quot;</span><span
                                class="p">)</span>
            <span class="k">return</span>  <span class="n">analog</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-106'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-106'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">set_digital</span><span
                            class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">digital</span><span
                            class="p">):</span>

        <span class="n">digital_list</span> <span class="o">=</span> <span class="p">[]</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-107'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-107'>#</a>
                    </div>
                    <p>Format tuples transformed to ints</p>
                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="k">if</span> <span class="bp">self</span><span
                            class="o">.</span><span class="n">num_measurements</span> <span class="o">&gt;</span> <span
                            class="mi">1</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span
                                class="p">(</span><span class="n">digital</span><span class="p">,</span> <span
                                class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span
                                class="bp">self</span><span class="o">.</span><span
                                class="n">num_measurements</span> <span class="o">!=</span> <span
                                class="nb">len</span><span class="p">(</span><span class="n">digital</span><span
                                class="p">):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&quot;When number of measurements &gt; 1 provide DIGITAL as list of lists with &quot;</span>
                                <span class="s">&quot;NUM_MEASUREMENTS elements.&quot;</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">dig</span> <span
                                class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span
                                class="n">digital</span><span class="p">):</span>
                <span class="n">dig_measurements</span> <span class="o">=</span> <span class="p">[]</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-108'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-108'>#</a>
                    </div>
                    <p>TODO: Add digital_num to check length of dig list</p>
                </div>
                <div class='code'>
                    <div class="highlight"><pre>                <span class="k">for</span> <span class="n">digital_measurement</span> <span
                            class="ow">in</span> <span class="n">dig</span><span class="p">:</span>
                    <span class="n">dig_measurements</span><span class="o">.</span><span class="n">append</span><span
                                class="p">(</span><span class="n">DataFrame</span><span class="o">.</span><span
                                class="n">digital2int</span><span class="p">(</span><span
                                class="n">digital_measurement</span><span class="p">))</span>

                <span class="n">digital_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span
                                class="n">dig_measurements</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">digital_measurement</span> <span class="ow">in</span> <span
                                class="n">digital</span><span class="p">:</span>
                <span class="n">digital_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span
                                class="n">DataFrame</span><span class="o">.</span><span
                                class="n">digital2int</span><span class="p">(</span><span
                                class="n">digital_measurement</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">digital</span> <span
                                class="o">=</span> <span class="n">digital_list</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-109'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-109'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">digital2int</span><span
                            class="p">(</span><span class="n">digital</span><span class="p">):</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="o">-</span><span
                                class="mi">32767</span> <span class="o">&lt;=</span> <span
                                class="n">digital</span> <span class="o">&lt;=</span> <span class="mi">65535</span><span
                                class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;DIGITAL must be 16 bit word. -32767 &lt;= DIGITAL &lt;= 65535.&quot;</span><span
                                class="p">)</span>
        <span class="k">return</span>  <span class="n">digital</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-110'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-110'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>    <span class="k">def</span> <span class="nf">convert2bytes</span><span
                                class="p">(</span><span class="bp">self</span><span class="p">):</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-111'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-111'>#</a>
                    </div>
                    <p>Convert DataFrame message to bytes</p>
                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="k">if</span> <span class="ow">not</span> <span
                            class="bp">self</span><span class="o">.</span><span class="n">num_measurements</span> <span
                            class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>

            <span class="n">data_format_size</span> <span class="o">=</span> <span class="n">CommonFrame</span><span
                                class="o">.</span><span class="n">get_data_format_size</span><span
                                class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_format</span><span
                                class="p">)</span>

            <span class="n">df_b</span> <span class="o">=</span> <span class="bp">self</span><span
                                class="o">.</span><span class="n">stat</span><span class="o">.</span><span class="n">to_bytes</span><span
                                class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;big&#39;</span><span
                                class="p">)</span> <span class="o">+</span> <span class="n">list2bytes</span><span
                                class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">phasors</span><span
                                class="p">,</span> <span class="n">data_format_size</span><span class="p">[</span><span
                                class="s">&#39;phasor&#39;</span><span class="p">])</span> <span class="o">+</span> \
                    <span class="bp">self</span><span class="o">.</span><span class="n">freq</span><span
                                class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span
                                class="n">data_format_size</span><span class="p">[</span><span
                                class="s">&#39;freq&#39;</span><span class="p">],</span> <span
                                class="s">&#39;big&#39;</span><span class="p">)</span> <span class="o">+</span> \
                    <span class="bp">self</span><span class="o">.</span><span class="n">dfreq</span><span
                                class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span
                                class="n">data_format_size</span><span class="p">[</span><span
                                class="s">&#39;freq&#39;</span><span class="p">],</span> <span
                                class="s">&#39;big&#39;</span><span class="p">)</span> <span class="o">+</span> \
                    <span class="n">list2bytes</span><span class="p">(</span><span class="bp">self</span><span
                                class="o">.</span><span class="n">analog</span><span class="p">,</span> <span class="n">data_format_size</span><span
                                class="p">[</span><span class="s">&#39;analog&#39;</span><span class="p">])</span> <span
                                class="o">+</span> \
                    <span class="n">list2bytes</span><span class="p">(</span><span class="bp">self</span><span
                                class="o">.</span><span class="n">digital</span><span class="p">,</span> <span
                                class="mi">2</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-112'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-112'>#</a>
                    </div>
                    <p>Concatenate measurements as many as num_measurements tells</p>
                </div>
                <div class='code'>
                    <div class="highlight"><pre>            <span class="n">df_b</span> <span class="o">=</span> <span
                            class="bp">None</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span
                                class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_measurements</span><span
                                class="p">):</span>

                <span class="n">data_format_size</span> <span class="o">=</span> <span class="n">CommonFrame</span><span
                                class="o">.</span><span class="n">get_data_format_size</span><span
                                class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_format</span><span
                                class="p">[</span><span class="n">i</span><span class="p">])</span>

                <span class="n">df_b_i</span> <span class="o">=</span> <span class="bp">self</span><span
                                class="o">.</span><span class="n">stat</span><span class="p">[</span><span
                                class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">to_bytes</span><span
                                class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;big&#39;</span><span
                                class="p">)</span> <span class="o">+</span> \
                          <span class="n">list2bytes</span><span class="p">(</span><span class="bp">self</span><span
                                class="o">.</span><span class="n">phasors</span><span class="p">[</span><span class="n">i</span><span
                                class="p">],</span> <span class="n">data_format_size</span><span class="p">[</span><span
                                class="s">&#39;phasor&#39;</span><span class="p">])</span> <span class="o">+</span> \
                          <span class="bp">self</span><span class="o">.</span><span class="n">freq</span><span
                                class="p">[</span><span class="n">i</span><span class="p">]</span><span
                                class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span
                                class="n">data_format_size</span><span class="p">[</span><span
                                class="s">&#39;freq&#39;</span><span class="p">],</span> <span
                                class="s">&#39;big&#39;</span><span class="p">)</span> <span class="o">+</span> \
                          <span class="bp">self</span><span class="o">.</span><span class="n">dfreq</span><span
                                class="p">[</span><span class="n">i</span><span class="p">]</span><span
                                class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span
                                class="n">data_format_size</span><span class="p">[</span><span
                                class="s">&#39;freq&#39;</span><span class="p">],</span> <span
                                class="s">&#39;big&#39;</span><span class="p">)</span> <span class="o">+</span> \
                          <span class="n">list2bytes</span><span class="p">(</span><span class="bp">self</span><span
                                class="o">.</span><span class="n">analog</span><span class="p">[</span><span
                                class="n">i</span><span class="p">],</span> <span class="n">data_format_size</span><span
                                class="p">[</span><span class="s">&#39;analog&#39;</span><span class="p">])</span> <span
                                class="o">+</span> \
                          <span class="n">list2bytes</span><span class="p">(</span><span class="bp">self</span><span
                                class="o">.</span><span class="n">digital</span><span class="p">[</span><span class="n">i</span><span
                                class="p">],</span> <span class="mi">2</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">df_b</span><span class="p">:</span>
                    <span class="n">df_b</span> <span class="o">+=</span> <span class="n">df_b_i</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">df_b</span> <span class="o">=</span> <span class="n">df_b_i</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-113'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-113'>#</a>
                    </div>
                    <p>SYNC word in CommonFrame starting with AA hex word + frame type + version</p>
                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="n">sync_b</span> <span class="o">=</span> <span
                            class="p">(</span><span class="mh">0xaa</span> <span class="o">&lt;&lt;</span> <span
                            class="mi">8</span><span class="p">)</span> <span class="o">|</span> <span
                            class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frame_type</span> <span
                            class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span
                            class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">version</span><span
                            class="p">)</span>
        <span class="n">sync_b</span> <span class="o">=</span> <span class="n">sync_b</span><span
                                class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span
                                class="mi">2</span><span class="p">,</span> <span class="s">&#39;big&#39;</span><span
                                class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-114'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-114'>#</a>
                    </div>
                    <p>FRAMESIZE: 2B SYNC + 2B FRAMESIZE + 2B IDCODE + 4B SOC + 4B FRASEC + len(Configuration Message) +
                        2B CHK</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>        <span class="n">frame_size_b</span> <span class="o">=</span> <span
                                class="p">(</span><span class="mi">16</span> <span class="o">+</span> <span class="nb">len</span><span
                                class="p">(</span><span class="n">df_b</span><span class="p">))</span><span
                                class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span
                                class="mi">2</span><span class="p">,</span> <span class="s">&#39;big&#39;</span><span
                                class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-115'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-115'>#</a>
                    </div>
                    <p>PMU ID CODE</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>        <span class="n">pmu_id_code_b</span> <span class="o">=</span> <span
                                class="bp">self</span><span class="o">.</span><span class="n">pmu_id_code</span><span
                                class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span
                                class="mi">2</span><span class="p">,</span> <span class="s">&#39;big&#39;</span><span
                                class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-116'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-116'>#</a>
                    </div>
                    <p>SOC</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>        <span class="n">soc_b</span> <span class="o">=</span> <span
                                class="bp">self</span><span class="o">.</span><span class="n">soc</span><span class="o">.</span><span
                                class="n">to_bytes</span><span class="p">(</span><span class="mi">4</span><span
                                class="p">,</span> <span class="s">&#39;big&#39;</span><span class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-117'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-117'>#</a>
                    </div>
                    <p>FRASEC</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>        <span class="n">frasec_b</span> <span class="o">=</span> <span
                                class="bp">self</span><span class="o">.</span><span class="n">frasec</span><span
                                class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span
                                class="mi">4</span><span class="p">,</span> <span class="s">&#39;big&#39;</span><span
                                class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-118'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-118'>#</a>
                    </div>
                    <p>CHK</p>
                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="n">crc_chk_b</span> <span class="o">=</span> <span
                            class="n">crc16xmodem</span><span class="p">(</span><span class="n">sync_b</span> <span
                            class="o">+</span> <span class="n">frame_size_b</span> <span class="o">+</span> <span
                            class="n">pmu_id_code_b</span> <span class="o">+</span> <span class="n">soc_b</span> <span
                            class="o">+</span> <span class="n">frasec_b</span> <span class="o">+</span> <span class="n">df_b</span><span
                            class="p">,</span> <span class="mh">0xffff</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">sync_b</span> <span class="o">+</span> <span class="n">frame_size_b</span> <span
                                class="o">+</span> <span class="n">pmu_id_code_b</span> <span class="o">+</span> <span
                                class="n">soc_b</span> <span class="o">+</span> <span class="n">frasec_b</span> <span
                                class="o">+</span> <span class="n">df_b</span> <span class="o">+</span> <span class="n">crc_chk_b</span><span
                                class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span
                                class="mi">2</span><span class="p">,</span> <span class="s">&#39;big&#39;</span><span
                                class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-119'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-119'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">convert2frame</span><span class="p">(</span><span
                                class="n">byte_data</span><span class="p">):</span>
        <span class="k">pass</span>


<span class="k">class</span> <span class="nc">CommandFrame</span><span class="p">(</span><span
                                class="n">CommonFrame</span><span class="p">):</span>


    <span class="n">COMMANDS</span> <span class="o">=</span> <span class="p">{</span><span
                                class="s">&#39;stop&#39;</span> <span class="p">:</span> <span class="mi">1</span><span
                                class="p">,</span> <span class="s">&#39;start&#39;</span> <span class="p">:</span> <span
                                class="mi">2</span><span class="p">,</span> <span
                                class="s">&#39;header&#39;</span> <span class="p">:</span> <span
                                class="mi">3</span><span class="p">,</span> <span class="s">&#39;cfg1&#39;</span> <span
                                class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s">&#39;cfg2&#39;</span> <span
                                class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s">&#39;cfg3&#39;</span> <span
                                class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="s">&#39;extended&#39;</span> <span
                                class="p">:</span> <span class="mi">8</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span
                                class="p">,</span> <span class="n">pmu_id_code</span><span class="p">,</span> <span
                                class="n">command</span><span class="p">,</span> <span
                                class="n">extended_frame</span><span class="o">=</span><span class="bp">None</span><span
                                class="p">,</span> <span class="n">soc</span> <span class="o">=</span> <span class="bp">None</span><span
                                class="p">,</span> <span class="n">frasec</span> <span class="o">=</span> <span
                                class="bp">None</span><span class="p">):</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span
                                class="n">__init__</span><span class="p">(</span><span
                                class="s">&#39;cmd&#39;</span><span class="p">,</span> <span
                                class="n">pmu_id_code</span><span class="p">,</span> <span class="n">soc</span><span
                                class="p">,</span> <span class="n">frasec</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_command</span><span
                                class="p">(</span><span class="n">command</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_extended_frame</span><span
                                class="p">(</span><span class="n">extended_frame</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_command</span><span class="p">(</span><span
                                class="bp">self</span><span class="p">,</span> <span class="n">command</span><span
                                class="p">):</span>

        <span class="k">if</span> <span class="n">command</span> <span class="ow">in</span> <span
                                class="n">CommandFrame</span><span class="o">.</span><span
                                class="n">COMMANDS</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">command</span> <span class="o">=</span> <span
                                class="n">CommandFrame</span><span class="o">.</span><span
                                class="n">COMMANDS</span><span class="p">[</span><span class="n">command</span><span
                                class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">command</span> <span class="o">=</span> <span
                                class="n">CommandFrame</span><span class="o">.</span><span
                                class="n">command2int</span><span class="p">(</span><span class="n">command</span><span
                                class="p">)</span>

    <span class="k">def</span> <span class="nf">command2int</span><span class="p">(</span><span class="n">command</span><span
                                class="p">):</span>

         <span class="k">if</span> <span class="ow">not</span> <span class="mi">0</span> <span
                                class="o">&lt;=</span> <span class="n">command</span> <span
                                class="o">&lt;=</span>  <span class="mi">65535</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Undesignated command code must be 16bit word. 0 &lt;= COMMAND &lt;= 65535&quot;</span><span
                                class="p">)</span>
         <span class="k">else</span><span class="p">:</span>
             <span class="k">return</span>  <span class="n">command</span>

    <span class="k">def</span> <span class="nf">set_extended_frame</span><span class="p">(</span><span
                                class="bp">self</span><span class="p">,</span> <span
                                class="n">extended_frame</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">extended_frame</span> <span class="ow">is</span> <span
                                class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">extended_frame</span> <span
                                class="o">=</span> <span class="n">CommandFrame</span><span class="o">.</span><span
                                class="n">extended2int</span><span class="p">(</span><span
                                class="n">extended_frame</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">extended2int</span><span class="p">(</span><span class="n">extended_frame</span><span
                                class="p">):</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span
                                class="n">extended_frame</span><span class="p">)</span> <span
                                class="o">&gt;</span> <span class="mi">65518</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Extended frame size to large. len(EXTENDED_FRAME) &lt; 65518&quot;</span><span
                                class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">extended_frame</span>

    <span class="k">def</span> <span class="nf">convert2bytes</span><span class="p">(</span><span class="bp">self</span><span
                                class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span
                                class="n">command</span> <span class="o">==</span> <span class="mi">8</span><span
                                class="p">:</span>
            <span class="n">cmd_b</span> <span class="o">=</span> <span class="bp">self</span><span
                                class="o">.</span><span class="n">command</span><span class="o">.</span><span class="n">to_bytes</span><span
                                class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;big&#39;</span><span
                                class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span
                                class="n">extended_frame</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cmd_b</span> <span class="o">=</span> <span class="bp">self</span><span
                                class="o">.</span><span class="n">command</span><span class="o">.</span><span class="n">to_bytes</span><span
                                class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;big&#39;</span><span
                                class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-120'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-120'>#</a>
                    </div>
                    <p>SYNC word in CommonFrame starting with AA hex word + frame type + version</p>
                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="n">sync_b</span> <span class="o">=</span> <span
                            class="p">(</span><span class="mh">0xaa</span> <span class="o">&lt;&lt;</span> <span
                            class="mi">8</span><span class="p">)</span> <span class="o">|</span> <span
                            class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frame_type</span> <span
                            class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span
                            class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">version</span><span
                            class="p">)</span>
        <span class="n">sync_b</span> <span class="o">=</span> <span class="n">sync_b</span><span
                                class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span
                                class="mi">2</span><span class="p">,</span> <span class="s">&#39;big&#39;</span><span
                                class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-121'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-121'>#</a>
                    </div>
                    <p>FRAMESIZE: 2B SYNC + 2B FRAMESIZE + 2B IDCODE + 4B SOC + 4B FRASEC + len(Command) + 2B CHK</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>        <span class="n">frame_size_b</span> <span class="o">=</span> <span
                                class="p">(</span><span class="mi">16</span> <span class="o">+</span> <span class="nb">len</span><span
                                class="p">(</span><span class="n">cmd_b</span><span class="p">))</span><span
                                class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span
                                class="mi">2</span><span class="p">,</span> <span class="s">&#39;big&#39;</span><span
                                class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-122'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-122'>#</a>
                    </div>
                    <p>PMU ID CODE</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>        <span class="n">pmu_id_code_b</span> <span class="o">=</span> <span
                                class="bp">self</span><span class="o">.</span><span class="n">pmu_id_code</span><span
                                class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span
                                class="mi">2</span><span class="p">,</span> <span class="s">&#39;big&#39;</span><span
                                class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-123'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-123'>#</a>
                    </div>
                    <p>SOC</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>        <span class="n">soc_b</span> <span class="o">=</span> <span
                                class="bp">self</span><span class="o">.</span><span class="n">soc</span><span class="o">.</span><span
                                class="n">to_bytes</span><span class="p">(</span><span class="mi">4</span><span
                                class="p">,</span> <span class="s">&#39;big&#39;</span><span class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-124'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-124'>#</a>
                    </div>
                    <p>FRASEC</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>        <span class="n">frasec_b</span> <span class="o">=</span> <span
                                class="bp">self</span><span class="o">.</span><span class="n">frasec</span><span
                                class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span
                                class="mi">4</span><span class="p">,</span> <span class="s">&#39;big&#39;</span><span
                                class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-125'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-125'>#</a>
                    </div>
                    <p>CHK</p>
                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="n">crc_chk_b</span> <span class="o">=</span> <span
                            class="n">crc16xmodem</span><span class="p">(</span><span class="n">sync_b</span> <span
                            class="o">+</span> <span class="n">frame_size_b</span> <span class="o">+</span> <span
                            class="n">pmu_id_code_b</span> <span class="o">+</span> <span class="n">soc_b</span> <span
                            class="o">+</span> <span class="n">frasec_b</span> <span class="o">+</span> <span class="n">cmd_b</span><span
                            class="p">,</span> <span class="mh">0xffff</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">sync_b</span> <span class="o">+</span> <span class="n">frame_size_b</span> <span
                                class="o">+</span> <span class="n">pmu_id_code_b</span> <span class="o">+</span> <span
                                class="n">soc_b</span> <span class="o">+</span> <span class="n">frasec_b</span> <span
                                class="o">+</span> <span class="n">cmd_b</span> <span class="o">+</span> <span
                                class="n">crc_chk_b</span><span class="o">.</span><span class="n">to_bytes</span><span
                                class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;big&#39;</span><span
                                class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-126'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-126'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">convert2frame</span><span class="p">(</span><span
                                class="n">byte_data</span><span class="p">):</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">pmu_code</span> <span class="o">=</span> <span class="nb">int</span><span class="o">.</span><span
                                class="n">from_bytes</span><span class="p">(</span><span class="n">byte_data</span><span
                                class="p">[</span><span class="mi">4</span><span class="p">:</span><span
                                class="mi">6</span><span class="p">],</span> <span class="n">byteorder</span><span
                                class="o">=</span><span class="s">&#39;big&#39;</span><span class="p">,</span> <span
                                class="n">signed</span><span class="o">=</span><span class="bp">False</span><span
                                class="p">)</span>
            <span class="n">soc</span> <span class="o">=</span> <span class="nb">int</span><span class="o">.</span><span
                                class="n">from_bytes</span><span class="p">(</span><span class="n">byte_data</span><span
                                class="p">[</span><span class="mi">6</span><span class="p">:</span><span
                                class="mi">10</span><span class="p">],</span> <span class="n">byteorder</span><span
                                class="o">=</span><span class="s">&#39;big&#39;</span><span class="p">,</span> <span
                                class="n">signed</span><span class="o">=</span><span class="bp">False</span><span
                                class="p">)</span>
            <span class="n">time_quality_frasec</span> <span class="o">=</span> <span class="nb">int</span><span
                                class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span
                                class="n">byte_data</span><span class="p">[</span><span class="mi">10</span><span
                                class="p">:</span><span class="mi">11</span><span class="p">],</span> <span class="n">byteorder</span><span
                                class="o">=</span><span class="s">&#39;big&#39;</span><span class="p">,</span> <span
                                class="n">signed</span><span class="o">=</span><span class="bp">False</span><span
                                class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-127'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-127'>#</a>
                    </div>
                    <p>Get bits using masks</p>
                </div>
                <div class='code'>
                    <div class="highlight"><pre>            <span class="n">leap_dir</span> <span
                            class="o">=</span> <span class="n">time_quality_frasec</span> <span
                            class="o">&amp;</span> <span class="mb">0b01000000</span>
            <span class="n">leap_occ</span> <span class="o">=</span> <span class="n">time_quality_frasec</span> <span
                                class="o">&amp;</span> <span class="mb">0b00100000</span>
            <span class="n">leap_pen</span> <span class="o">=</span> <span class="n">time_quality_frasec</span> <span
                                class="o">&amp;</span> <span class="mb">0b00010000</span>

            <span class="n">time_quality</span> <span class="o">=</span> <span
                                class="n">time_quality_frasec</span> <span class="o">&amp;</span> <span class="mb">0b00001111</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-128'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-128'>#</a>
                    </div>
                    <p>Reassing values to create Command frame</p>
                </div>
                <div class='code'>
                    <div class="highlight"><pre>            <span class="n">leap_dir</span> <span
                            class="o">=</span> <span class="s">&#39;-&#39;</span> <span class="k">if</span> <span
                            class="n">leap_dir</span> <span class="k">else</span> <span class="s">&#39;+&#39;</span>
            <span class="n">leap_occ</span> <span class="o">=</span> <span class="nb">bool</span><span
                                class="p">(</span><span class="n">leap_occ</span><span class="p">)</span>
            <span class="n">leap_pen</span> <span class="o">=</span> <span class="nb">bool</span><span
                                class="p">(</span><span class="n">leap_pen</span><span class="p">)</span>

            <span class="n">frasec</span> <span class="o">=</span> <span class="nb">int</span><span
                                class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span
                                class="n">byte_data</span><span class="p">[</span><span class="mi">11</span><span
                                class="p">:</span><span class="mi">14</span><span class="p">],</span> <span class="n">byteorder</span><span
                                class="o">=</span><span class="s">&#39;big&#39;</span><span class="p">,</span> <span
                                class="n">signed</span><span class="o">=</span><span class="bp">False</span><span
                                class="p">)</span>

            <span class="n">command_int</span> <span class="o">=</span> <span class="nb">int</span><span
                                class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span
                                class="n">byte_data</span><span class="p">[</span><span class="mi">14</span><span
                                class="p">:</span><span class="mi">16</span><span class="p">],</span> <span class="n">byteorder</span><span
                                class="o">=</span><span class="s">&#39;big&#39;</span><span class="p">,</span> <span
                                class="n">signed</span><span class="o">=</span><span class="bp">False</span><span
                                class="p">)</span>
            <span class="n">command</span> <span class="o">=</span> <span class="p">[</span><span
                                class="n">command</span> <span class="k">for</span> <span class="n">command</span><span
                                class="p">,</span> <span class="n">code</span> <span class="ow">in</span> <span
                                class="n">CommandFrame</span><span class="o">.</span><span
                                class="n">COMMANDS</span><span class="o">.</span><span class="n">items</span><span
                                class="p">()</span> <span class="k">if</span> <span class="n">code</span> <span
                                class="o">==</span> <span class="n">command_int</span><span class="p">]</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-129'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-129'>#</a>
                    </div>
                    <p>Should match only one Command</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>            <span class="k">if</span> <span class="nb">len</span><span
                                class="p">(</span><span class="n">command</span><span class="p">)</span> <span
                                class="o">==</span> <span class="mi">1</span><span class="p">:</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-130'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-130'>#</a>
                    </div>
                    <p>Convert list to string</p>
                </div>
                <div class='code'>
                    <div class="highlight"><pre>                <span class="n">command</span> <span class="o">=</span> <span
                            class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span
                            class="p">(</span><span class="n">command</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-131'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-131'>#</a>
                    </div>
                    <p>User defined command</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>                <span class="n">command</span> <span class="o">=</span> <span class="n">command_int</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-132'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-132'>#</a>
                    </div>
                    <p>Check if extended frame</p>
                </div>
                <div class='code'>
                    <div class="highlight"><pre>            <span class="k">if</span> <span
                            class="n">command</span> <span class="o">==</span> <span class="s">&#39;extended&#39;</span><span
                            class="p">:</span>
                <span class="n">extended_frame</span> <span class="o">=</span> <span class="n">byte_data</span><span
                                class="p">[</span><span class="mi">16</span><span class="p">:</span><span
                                class="o">-</span><span class="mi">2</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">extended_frame</span> <span class="o">=</span> <span class="bp">None</span>

            <span class="k">return</span> <span class="n">CommandFrame</span><span class="p">(</span><span class="n">pmu_code</span><span
                                class="p">,</span> <span class="n">command</span><span class="p">,</span> <span
                                class="n">extended_frame</span><span class="p">,</span> <span class="n">soc</span><span
                                class="p">,</span> <span class="p">(</span><span class="n">frasec</span><span class="p">,</span> <span
                                class="n">leap_dir</span><span class="p">,</span> <span class="n">leap_occ</span><span
                                class="p">,</span>
                                                                         <span class="n">leap_pen</span><span class="p">,</span> <span
                                class="n">time_quality</span><span class="p">))</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span
                                class="n">error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="s">&quot;Error while creating Command frame: &quot;</span> <span
                                class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">error</span><span
                                class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-133'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-133'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre><span class="k">class</span> <span class="nc">HeaderFrame</span><span
                                class="p">(</span><span class="n">CommonFrame</span><span class="p">):</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-134'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-134'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">__init__</span><span
                            class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pmu_id_code</span><span
                            class="p">,</span> <span class="n">header</span><span class="p">,</span> <span
                            class="n">soc</span> <span class="o">=</span> <span class="bp">None</span><span
                            class="p">,</span> <span class="n">frasec</span> <span class="o">=</span> <span class="bp">None</span><span
                            class="p">):</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span
                                class="n">__init__</span><span class="p">(</span><span class="s">&#39;header&#39;</span><span
                                class="p">,</span> <span class="n">pmu_id_code</span><span class="p">,</span> <span
                                class="n">soc</span><span class="p">,</span> <span class="n">frasec</span><span
                                class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">header</span> <span class="o">=</span> <span
                                class="n">header</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-135'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-135'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>    <span class="k">def</span> <span
                            class="nf">convert2bytes</span><span class="p">(</span><span class="bp">self</span><span
                            class="p">):</span>

        <span class="n">header_b</span> <span class="o">=</span> <span class="nb">str</span><span
                                class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span
                                class="o">.</span><span class="n">header</span><span class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-136'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-136'>#</a>
                    </div>
                    <p>SYNC word in CommonFrame starting with AA hex word + frame type + version</p>
                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="n">sync_b</span> <span class="o">=</span> <span
                            class="p">(</span><span class="mh">0xaa</span> <span class="o">&lt;&lt;</span> <span
                            class="mi">8</span><span class="p">)</span> <span class="o">|</span> <span
                            class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frame_type</span> <span
                            class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span
                            class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">version</span><span
                            class="p">)</span>
        <span class="n">sync_b</span> <span class="o">=</span> <span class="n">sync_b</span><span
                                class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span
                                class="mi">2</span><span class="p">,</span> <span class="s">&#39;big&#39;</span><span
                                class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-137'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-137'>#</a>
                    </div>
                    <p>FRAMESIZE: 2B SYNC + 2B FRAMESIZE + 2B IDCODE + 4B SOC + 4B FRASEC + len(Command) + 2B CHK</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>        <span class="n">frame_size_b</span> <span class="o">=</span> <span
                                class="p">(</span><span class="mi">16</span> <span class="o">+</span> <span class="nb">len</span><span
                                class="p">(</span><span class="n">header_b</span><span class="p">))</span><span
                                class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span
                                class="mi">2</span><span class="p">,</span> <span class="s">&#39;big&#39;</span><span
                                class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-138'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-138'>#</a>
                    </div>
                    <p>PMU ID CODE</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>        <span class="n">pmu_id_code_b</span> <span class="o">=</span> <span
                                class="bp">self</span><span class="o">.</span><span class="n">pmu_id_code</span><span
                                class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span
                                class="mi">2</span><span class="p">,</span> <span class="s">&#39;big&#39;</span><span
                                class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-139'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-139'>#</a>
                    </div>
                    <p>SOC</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>        <span class="n">soc_b</span> <span class="o">=</span> <span
                                class="bp">self</span><span class="o">.</span><span class="n">soc</span><span class="o">.</span><span
                                class="n">to_bytes</span><span class="p">(</span><span class="mi">4</span><span
                                class="p">,</span> <span class="s">&#39;big&#39;</span><span class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-140'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-140'>#</a>
                    </div>
                    <p>FRASEC</p>
                </div>
                <div class='code'>
                    <div class="highlight">
                        <pre>        <span class="n">frasec_b</span> <span class="o">=</span> <span
                                class="bp">self</span><span class="o">.</span><span class="n">frasec</span><span
                                class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span
                                class="mi">4</span><span class="p">,</span> <span class="s">&#39;big&#39;</span><span
                                class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-141'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-141'>#</a>
                    </div>
                    <p>CHK</p>
                </div>
                <div class='code'>
                    <div class="highlight"><pre>        <span class="n">crc_chk_b</span> <span class="o">=</span> <span
                            class="n">crc16xmodem</span><span class="p">(</span><span class="n">sync_b</span> <span
                            class="o">+</span> <span class="n">frame_size_b</span> <span class="o">+</span> <span
                            class="n">pmu_id_code_b</span> <span class="o">+</span> <span class="n">soc_b</span> <span
                            class="o">+</span> <span class="n">frasec_b</span> <span class="o">+</span> <span class="n">header_b</span><span
                            class="p">,</span> <span class="mh">0xffff</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">sync_b</span> <span class="o">+</span> <span class="n">frame_size_b</span> <span
                                class="o">+</span> <span class="n">pmu_id_code_b</span> <span class="o">+</span> <span
                                class="n">soc_b</span> <span class="o">+</span> <span class="n">frasec_b</span> <span
                                class="o">+</span> <span class="n">header_b</span> <span class="o">+</span> <span
                                class="n">crc_chk_b</span><span class="o">.</span><span class="n">to_bytes</span><span
                                class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;big&#39;</span><span
                                class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-142'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-142'>#</a>
                    </div>

                </div>
                <div class='code'>
                    <div class="highlight"><pre>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">convert2frame</span><span class="p">(</span><span
                                class="n">byte_data</span><span class="p">):</span>
        <span class="k">pass</span>

<span class="k">class</span> <span class="nc">FrameError</span><span class="p">(</span><span
                                class="ne">BaseException</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">get_frame</span><span class="p">(</span><span
                                class="n">byte_data</span><span class="p">):</span>

    <span class="n">convert_method</span> <span class="o">=</span> <span class="p">{</span>
        <span class="mi">0</span><span class="p">:</span> <span class="n">DataFrame</span><span class="o">.</span><span
                                class="n">convert2frame</span><span class="p">,</span>
        <span class="mi">1</span><span class="p">:</span> <span class="n">HeaderFrame</span><span
                                class="o">.</span><span class="n">convert2frame</span><span class="p">,</span>
        <span class="mi">2</span><span class="p">:</span> <span class="n">ConfigFrame1</span><span
                                class="o">.</span><span class="n">convert2frame</span><span class="p">,</span>
        <span class="mi">3</span><span class="p">:</span> <span class="n">ConfigFrame2</span><span
                                class="o">.</span><span class="n">convert2frame</span><span class="p">,</span>
        <span class="mi">4</span><span class="p">:</span> <span class="n">CommandFrame</span><span
                                class="o">.</span><span class="n">convert2frame</span><span class="p">,</span>
        <span class="mi">5</span><span class="p">:</span> <span class="n">ConfigFrame3</span><span
                                class="o">.</span><span class="n">convert2frame</span><span class="p">,</span>
    <span class="p">}</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-143'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-143'>#</a>
                    </div>
                    <p>Check if frame is valid - using CRC (two last bytes)</p>
                </div>
                <div class='code'>
                    <div class="highlight"><pre>    <span class="n">crc_calculated</span> <span class="o">=</span> <span
                            class="n">crc16xmodem</span><span class="p">(</span><span class="n">byte_data</span><span
                            class="p">[</span><span class="mi">0</span><span class="p">:</span><span
                            class="o">-</span><span class="mi">2</span><span class="p">],</span> <span
                            class="mh">0xffff</span><span class="p">)</span><span class="o">.</span><span class="n">to_bytes</span><span
                            class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;big&#39;</span><span
                            class="p">)</span>

    <span class="k">if</span> <span class="n">byte_data</span><span class="p">[</span><span class="o">-</span><span
                                class="mi">2</span><span class="p">:]</span> <span class="o">!=</span> <span class="n">crc_calculated</span><span
                                class="p">:</span>
        <span class="k">raise</span> <span class="n">FrameError</span><span class="p">(</span><span class="s">&quot;CRC failed. Frame not valid.&quot;</span><span
                                class="p">)</span></pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
            <div class='section' id='section-144'>
                <div class='docs'>
                    <div class='octowrap'>
                        <a class='octothorpe' href='#section-144'>#</a>
                    </div>
                    <p>Get second byte and determine frame type by shifting right to get higher 4 bits</p>
                </div>
                <div class='code'>
                    <div class="highlight"><pre>    <span class="n">frame_type</span> <span class="o">=</span> <span
                            class="nb">int</span><span class="o">.</span><span class="n">from_bytes</span><span
                            class="p">([</span><span class="n">byte_data</span><span class="p">[</span><span class="mi">1</span><span
                            class="p">]],</span> <span class="n">byteorder</span><span class="o">=</span><span
                            class="s">&#39;big&#39;</span><span class="p">,</span> <span class="n">signed</span><span
                            class="o">=</span><span class="bp">False</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span
                            class="mi">4</span>

    <span class="k">return</span> <span class="n">convert_method</span><span class="p">[</span><span class="n">frame_type</span><span
                                class="p">](</span><span class="n">byte_data</span><span class="p">)</span>

</pre>
                    </div>
                </div>
            </div>
            <div class='clearall'></div>
        </div>
</body>
